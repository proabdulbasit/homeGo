(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{180:function(e,t,s){},242:function(e,t){},392:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(38),r=s.n(c),i=(s(180),s(2)),o=s(3),l=s.n(o),d=s(8),j=s(4),u=s(6),h=s(10),p=s(9),b=s(11),m=s(17),O=s(165),x="/api/",f=s.n(O).a.create({withCredentials:!0}),g=function(e,t){return N(e,"GET",t)},v=function(e,t){return N(e,"POST",t)},y=function(e,t){return N(e,"PUT",t)},k=function(e,t){return N(e,"DELETE",t)};function N(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(l.a.mark((function e(t){var s,a,n,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>1&&void 0!==c[1]?c[1]:"GET",a=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,f({url:"".concat(x).concat(t),method:s,data:a,params:"GET"===s?a:null});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(s,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S={query:function(e){return g("stay",e)},getById:function(e){return g("stay/".concat(e))},remove:function(e){return k("stay/".concat(e))},update:function(e){return C.apply(this,arguments)},add:function(e){return U.apply(this,arguments)},getTopRatedStays:function(){return T.apply(this,arguments)},getNearbyStays:function(e){return M.apply(this,arguments)},getHostStays:function(e){return D.apply(this,arguments)},getUserWishlist:function(e){return I.apply(this,arguments)}};function C(){return(C=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("stay/".concat(t._id),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("stay",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(d.a)(l.a.mark((function e(){var t,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{loc:{address:""},guests:{adults:1,kids:0},type:"top rated"},e.next=3,g("stay",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("stay",{loc:{address:""},guests:{adults:1,kids:0},type:"nearby",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("stay",{loc:{address:""},guests:{adults:1,kids:0},type:"host",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("stay",{loc:{address:""},guests:{adults:1,kids:0},type:"wishlist",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.stayService=S;var A={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=s.charAt(Math.floor(Math.random()*s.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],s="";for(;e>0;)e--,s+=t[Math.floor(Math.random()*t.length)]+" ";return s},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},getTimeFormat:function(e){var t=(e=new Date(e)).getDay()+1,s=e.getMonth()+1,a=e.getFullYear();return"".concat(_(t)," / ").concat(_(s)," / ").concat(a)}};function _(e){return e<10?"0".concat(e):e}var P=s(0);function E(e){var t=e.review;return Object(P.jsxs)("section",{className:"review-preview",children:[Object(P.jsxs)("div",{className:"review-header",children:[Object(P.jsx)("img",{src:t.user.imgUrl,alt:"user"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:t.user.fullname}),Object(P.jsx)("h4",{children:A.getTimeFormat(t.user.time)})]})]}),Object(P.jsx)("div",{className:"review-body",children:Object(P.jsx)("h2",{children:t.txt})})]})}function R(e){var t=e.reviews;return Object(P.jsx)("section",{className:"review-list",children:t.map((function(e){return Object(P.jsx)(E,{review:e},Math.random())}))})}var F=s(13),H=s(33),L=s.n(H),W=s.p+"static/media/avatar.e582e4ba.png",q=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={review:{txt:"",avgRate:0,categories:{Cleanliness:0,Accuracy:0,Communication:0,Location:0,"Check-in":0,Accessibility:0},user:{_id:"123456789",fullname:"Guest",imgUrl:W,time:Date.now()}}},e.clearForm=function(){e.setState({review:Object(i.a)(Object(i.a)({},e.state.review),{},{txt:"",avgRate:0,categories:{Cleanliness:0,Accuracy:0,Communication:0,Location:0,"Check-in":0,Accessibility:0}})})},e.handleRateChange=function(t,s){e.setState({review:Object(i.a)(Object(i.a)({},e.state.review),{},{categories:Object(i.a)(Object(i.a)({},e.state.review.categories),{},Object(F.a)({},s,t))})})},e.handleChange=function(t){var s=t.target.value;e.setState({review:Object(i.a)(Object(i.a)({},e.state.review),{},{txt:s})})},e.saveReview=function(){var t=e.state.review,s=t.categories,a=0;for(var n in s)a+=s[n];var c=e.props.loggedInUser;c&&(t.user.imgUrl=c.imgUrl,t.user.fullname=c.fullname,t.user._id=c._id,t.user.time=Date.now()),t.avgRate=a/6,t._id=A.makeId(),e.props.addReview(t),e.clearForm()},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.loggedInUser;e&&this.setState({review:Object(i.a)(Object(i.a)({},this.state.review),{},{user:{_id:e._id,fullname:e.username,imgUrl:e.imgUrl,time:Date.now()}})})}},{key:"componentDidUpdate",value:function(e){e.loggedInUser&&e.loggedInUser!==this.props.loggedInUser&&this.setState({review:Object(i.a)(Object(i.a)({},this.state.review),{},{user:{_id:this.props.loggedInUser._id,fullname:this.props.loggedInUser.username,imgUrl:this.props.loggedInUser.imgUrl,time:Date.now()}})})}},{key:"render",value:function(){var e=this,t=this.props.loggedInUser,s=t?t.imgUrl:W,a=t?t.fullname:"Guest";return Object(P.jsxs)("section",{className:"stay-add-review",children:[Object(P.jsx)("h2",{children:"Add review"}),Object(P.jsxs)("div",{className:"add-review-header",children:[Object(P.jsx)("img",{src:s,alt:"avater"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:a}),Object(P.jsx)("h4",{children:A.getTimeFormat(Date.now())})]})]}),Object(P.jsxs)("div",{className:"stay-add-review-ctgs",children:[Object(P.jsxs)("div",{className:"ctg-statistics",children:[Object(P.jsx)("label",{htmlFor:"",children:"Location"}),Object(P.jsx)(L.a,{count:5,onChange:function(t){e.handleRateChange(t,"Location")},size:20,isHalf:!0,activeColor:"#ff385c"})]}),Object(P.jsxs)("div",{className:"ctg-statistics",children:[Object(P.jsx)("label",{htmlFor:"",children:"Check-in"}),Object(P.jsx)(L.a,{count:5,onChange:function(t){e.handleRateChange(t,"Check-in")},size:20,isHalf:!0,activeColor:"#ff385c"})]}),Object(P.jsxs)("div",{className:"ctg-statistics",children:[Object(P.jsx)("label",{htmlFor:"",children:"Accessibility"}),Object(P.jsx)(L.a,{count:5,onChange:function(t){e.handleRateChange(t,"Accessibility")},size:20,isHalf:!0,activeColor:"#ff385c"})]}),Object(P.jsxs)("div",{className:"ctg-statistics",children:[Object(P.jsx)("label",{htmlFor:"",children:"Communication"}),Object(P.jsx)(L.a,{count:5,onChange:function(t){e.handleRateChange(t,"Communication")},size:20,isHalf:!0,activeColor:"#ff385c"})]}),Object(P.jsxs)("div",{className:"ctg-statistics",children:[Object(P.jsx)("label",{htmlFor:"",children:"Accuracy"}),Object(P.jsx)(L.a,{count:5,onChange:function(t){e.handleRateChange(t,"Accuracy")},size:20,isHalf:!0,activeColor:"#ff385c"})]}),Object(P.jsxs)("div",{className:"ctg-statistics",children:[Object(P.jsx)("label",{htmlFor:"",children:"Cleanliness-in"}),Object(P.jsx)(L.a,{id:"clean",classNames:"rate-clean",count:5,onChange:function(t){e.handleRateChange(t,"Cleanliness")},size:20,isHalf:!0,activeColor:"#ff385c"})]})]}),Object(P.jsxs)("div",{className:"add-review-txt",children:[Object(P.jsx)("textarea",{type:"text",name:"txt",autoComplete:"off",onChange:this.handleChange,value:this.state.review.txt,placeholder:"Write your opinion about this stay..."}),Object(P.jsx)("button",{onClick:this.saveReview,children:" send "})]})]})}}]),s}(a.Component),B=s(23),Y=s(167),G=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={startDate:new Date,endDate:new Date,key:"selection"},e.handleSelect=function(t){e.setState({startDate:t.selection.startDate,endDate:t.selection.endDate,key:"selection"},(function(){e.props.handleDates(e.state)}))},e}return Object(u.a)(s,[{key:"render",value:function(){return Object(P.jsx)(Y.DateRange,{editableDateInputs:!0,ranges:[this.state],moveRangeOnFirstSelection:!1,onChange:this.handleSelect})}}]),s}(a.Component),V={query:function(){return function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}($)},remove:function(){return J($,null)},add:function(e){return J($,e)},getTopCities:function(){return[{city:"Hong Kong",state:"China",imgUrl:"https://a0.muscache.com/im/pictures/be4d3ba5-08d7-4afe-95a7-f2da6453886a.jpg?im_q=medq&im_w=240"},{city:"Bangkok",state:"Thailand",imgUrl:"https://a0.muscache.com/im/pictures/7253e011-7c22-48fd-b75d-d0da35372397.jpg?im_q=medq&im_w=240"},{city:"London",state:"England",imgUrl:"https://a0.muscache.com/im/pictures/52e8083e-2de2-446d-a860-534eab250541.jpg?im_q=medq&im_w=240"},{city:"Paris",state:"France",imgUrl:"https://a0.muscache.com/im/pictures/20e74de0-0eb8-4fca-afb8-b111875acdf5.jpg?im_q=medq&im_w=240"},{city:"Dubai",state:"United Arab Emirates",imgUrl:"https://a0.muscache.com/im/pictures/e639b7ab-aee3-48ee-9743-216684a51319.jpg?im_q=medq&im_w=240"},{city:"New York",state:"United States",imgUrl:"https://a0.muscache.com/im/pictures/ca3737ef-0faf-46ba-b055-b4a2d99e2cea.jpg?im_q=medq&im_w=240"},{city:"Amsterdam",state:"Netherlands",imgUrl:"https://a0.muscache.com/im/pictures/585d1e53-e2e1-4baf-a34e-36301dd1e2da.jpg?im_q=medq&im_w=240"},{city:"Tel Aviv",state:"Israel",imgUrl:"https://a0.muscache.com/im/pictures/7c309a70-bc93-4603-8d3b-9d4cd9bf75b2.jpg?im_q=medq&im_w=240"}]}},$="trip";function J(e,t){return localStorage[e]=JSON.stringify(t),t}window.tripService=V;var z={query:K,remove:function(e){return k("order/".concat(e))},add:function(e,t,s){return Z.apply(this,arguments)},update:function(e){return te.apply(this,arguments)},getHostOrders:function(e){return Q.apply(this,arguments)},getUserOrders:function(e){return ee.apply(this,arguments)}};function K(){return X.apply(this,arguments)}function X(){return(X=Object(d.a)(l.a.mark((function e(){var t,s,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{id:null,type:"all",filterBy:{num:1,name:""}},e.next=3,g("order",t);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(d.a)(l.a.mark((function e(t,s,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={createdAt:Date.now(),endDate:t.time.checkOut,startDate:t.time.checkIn,guests:t.guests,host:s.host,status:"wait for approval",totalPrice:t.totalPrice,user:a,stay:s},V.remove(),e.next=4,v("order",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(d.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(s=K("order",{id:t,type:"host"})).filter((function(e){return e.host._id===t})),e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(d.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(s=K("order",{id:t,type:"user"})).filter((function(e){return e.host._id===t})),e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("order/".concat(t._id),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.orderService=z;var se={login:function(e){return ae.apply(this,arguments)},logout:function(){return ce.apply(this,arguments)},signup:function(e){return ne.apply(this,arguments)},getById:function(e){return console.log("getById: ",e),g("user/".concat(e))},update:function(e){return re.apply(this,arguments)},getLoggedinUser:ie};function ae(){return(ae=Object(d.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("auth/login",t);case 2:if(!(s=e.sent)){e.next=5;break}return e.abrupt("return",oe(s));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(d.a)(l.a.mark((function e(t){var s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Math.random()>.5?"men":"women",t.imgUrl="https://randomuser.me/api/portraits/".concat(s,"/").concat(A.getRandomIntInclusive(0,100),".jpg"),e.next=4,v("auth/signup",t);case 4:return a=e.sent,e.abrupt("return",oe(a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.next=3,v("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(d.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("user/".concat(t._id),t);case 2:return s=e.sent,ie()._id===s._id&&oe(s),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return JSON.parse(sessionStorage.getItem("loggedinUser")||"null")}function oe(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function le(){return function(){var e=Object(d.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.getUsers();case 3:s=e.sent,t({type:"SET_USERS",users:s}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function de(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.login(e);case 3:a=t.sent,s({type:"SET_USER",user:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function je(){return function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.logout();case 3:t({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}window.userService=se;var ue=s(168),he=s.n(ue),pe=function(){var e=null,t={setup:function(){return Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,g("setup-session");case 4:e=he()("",{reconnection:!1}),!0;case 6:case"end":return t.stop()}}),t)})))()},on:function(s,a){return Object(d.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return n.next=3,t.setup();case 3:e.on(s,a);case 4:case"end":return n.stop()}}),n)})))()},off:function(s){var a=arguments;return Object(d.a)(l.a.mark((function n(){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=a.length>1&&void 0!==a[1]?a[1]:null,e){n.next=4;break}return n.next=4,t.setup();case 4:c?e.off(s,c):e.removeAllListeners(s);case 5:case"end":return n.stop()}}),n)})))()},emit:function(s,a){return Object(d.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return n.next=3,t.setup();case 3:e.emit(s,a);case 4:case"end":return n.stop()}}),n)})))()},terminate:function(){e=null,!1}};return t}();window.socketService=pe;pe.setup();var be,me=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={trip:{guests:{adults:0,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""}},isAvailable:!1,dynamicModal:{modalContent:"",modalPosition:{}}},e.onSetModal=function(t,s){var a={x:t.pageX,y:t.pageY};e.setState({dynamicModal:Object(i.a)(Object(i.a)({},e.state.dynamicModal),{},{modalPosition:a})},(function(){e.openModal(s)}))},e.handleDates=function(t){var s=t.startDate.toDateString(),a=t.endDate.toDateString();e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{time:{checkIn:s,checkOut:a}})})},e.openModal=function(t){var s={},a=e.state.dynamicModal.modalPosition,n=a.x,c=a.y;switch(t){case"date":s.modalContent=Object(P.jsx)("section",{className:"dynamic-modal-child book-date-modal",children:Object(P.jsx)(G,{handleDates:e.handleDates})}),s.modalPosition={top:c+20,left:n};break;case"book-guests":var r=e.state.trip.guests,i=r.kids,o=r.adults;s.modalContent=Object(P.jsxs)("section",{className:"book-guest-modal",children:[Object(P.jsxs)("div",{className:"modal-label",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Adults"}),Object(P.jsx)("span",{children:"Ages 13 or above"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{className:"modal-btn",type:"button",onClick:function(){e.handleChange({target:{name:"adults",type:"number",value:o-1}})},children:"-"}),Object(P.jsx)("span",{children:o}),Object(P.jsx)("button",{className:"modal-btn",type:"button",onClick:function(){e.handleChange({target:{name:"adults",type:"number",value:o+1}})},children:"+"})]})]}),Object(P.jsxs)("div",{className:"modal-label",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Kids"}),Object(P.jsx)("span",{children:"Ages 2\u201312"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{className:"modal-btn",type:"button",onClick:function(){e.handleChange({target:{name:"kids",type:"number",value:i-1}})},children:"-"}),Object(P.jsx)("span",{children:i}),Object(P.jsx)("button",{className:"modal-btn",type:"button",onClick:function(){e.handleChange({target:{name:"kids",type:"number",value:i+1}})},children:"+"})]})]})]}),s.modalPosition={top:c,left:n};break;case"":s.modalContent="",s.modalPosition={top:0,left:0,height:0,width:0}}e.props.setModalContent(s,t)},e.handleChange=function(t){t.timeStamp&&t.preventDefault();var s=t.target,a=s.name,n=s.value,c=s.type;if("date"===c)e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{time:Object(i.a)(Object(i.a)({},e.state.trip.time),{},Object(F.a)({},a,n))})});else if("number"===c){if(n<0)return;var r=e.state.trip.guests.adults+e.state.trip.guests.kids,o=e.state.trip.guests[a]<n;if(r===e.props.stay.capacity&&o)return;e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{guests:Object(i.a)(Object(i.a)({},e.state.trip.guests),{},Object(F.a)({},a,+n))})},(function(){e.openModal("book-guests")}))}else e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{loc:Object(i.a)(Object(i.a)({},e.state.trip.loc),{},Object(F.a)({},a,n))})})},e.toggleAvailability=function(){var t=e.state.trip,s=t.guests,a=t.time;s.adults+s.kids<1?e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"fas fa-exclamation"}),Object(P.jsx)("h2",{children:"Please enter guest number"})]})):a.checkIn&&a.checkOut?e.setState({isAvailable:!e.state.isAvailable},(function(){e.props.onSearch(e.state.trip)})):e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"fas fa-exclamation"}),Object(P.jsx)("h2",{children:"Please enter trip dates"})]}))},e.onReserveTrip=Object(d.a)(l.a.mark((function t(){var s,a,n,c,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.state.trip,a=e.props,n=a.stay,c=a.loggedInUser,r=a.login,c){t.next=5;break}return e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("h2",{children:"You must log in frist"}),Object(P.jsx)(b.b,{to:"/login",children:"Login"}),Object(P.jsx)("button",{className:"demo-user-btn",onClick:function(){r({username:"mor",password:"1111"})},children:"Demo User"})]})),t.abrupt("return");case 5:return s.totalPrice=(s.guests.kids+s.guests.adults)*n.price*e.getTripTime(),t.next=8,e.props.addOrder(s,n,c);case 8:i=t.sent,pe.emit("ORDER_OUT",i),e.setState({trip:{guests:{adults:0,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""}},isAvailable:!1}),e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"far fa-check-circle"}),Object(P.jsx)("h3",{children:"Your order has sent to the host"})]}));case 12:case"end":return t.stop()}}),t)}))),e.getTripTime=function(){return(new Date(e.state.trip.time.checkOut).getTime()-new Date(e.state.trip.time.checkIn).getTime())/1e3/60/60/24},e.getCells=function(){for(var e=[],t=0;t<100;t++)e.push(Object(P.jsx)("div",{className:"cell"},Math.random()));return e},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.trip||{guests:{adults:0,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""}};this.setState({trip:e,isAvailable:!1})}},{key:"componentDidUpdate",value:function(e){e.modalType!==this.props.modalType&&this.openModal(this.props.modalType)}},{key:"render",value:function(){var e=this,t=this.props,s=t.stay,a=t.getTotalRate,n=this.state,c=n.trip,r=n.isAvailable,i=c.time,o=i.checkIn,l=i.checkOut,d=s.reviews,j=s.price;return Object(P.jsx)("section",{className:"order-form-container",children:Object(P.jsxs)("div",{className:"order-form-sticky",children:[Object(P.jsxs)("div",{className:"order-form",children:[Object(P.jsxs)("div",{className:"order-form-header",children:[Object(P.jsxs)("p",{children:[Object(P.jsxs)("span",{className:"order-price",children:["$",c.guests.kids+c.guests.adults===0?j:((c.guests.kids+c.guests.adults)*j).toLocaleString("en-US")]})," / night"]}),Object(P.jsxs)("span",{className:"stay-rate-display",children:[Object(P.jsx)("i",{className:"fas fa-star"}),a(),Object(P.jsxs)("p",{children:[" (",d.length," reviews) "]})]})]}),Object(P.jsxs)("form",{children:[Object(P.jsxs)("div",{className:"order-form-date-picker",children:[Object(P.jsxs)("label",{htmlFor:"check-in",className:"check-in",children:[Object(P.jsx)("span",{children:"Check in"}),Object(P.jsx)("input",{defaultValue:o,id:"check-in",autoComplete:"off",placeholder:"Add dates",onClick:function(t){return e.onSetModal(t,"date")}})]}),Object(P.jsxs)("label",{htmlFor:"check-out",className:"check-out",children:[Object(P.jsx)("span",{children:"Check out"}),Object(P.jsx)("input",{defaultValue:l,id:"check-out",autoComplete:"off",placeholder:"Add dates",onClick:function(t){return e.onSetModal(t,"date")}})]})]}),Object(P.jsxs)("label",{className:"guests-lable",children:[Object(P.jsx)("span",{children:"Guests"}),Object(P.jsx)("input",{onClick:function(t){e.onSetModal(t,"book-guests")},name:"guests",value:c.guests.kids+c.guests.adults,type:"text",placeholder:"Add guests",onChange:this.handleChange})]}),Object(P.jsxs)("div",{className:"book-stay-btn book-stay-btn-container",onClick:r?this.onReserveTrip:this.toggleAvailability,children:[this.getCells(),Object(P.jsx)("div",{className:"content",children:Object(P.jsx)("button",{className:"action-btn",children:Object(P.jsx)("span",{children:r?"Reserve":"Check availability"})})})]}),r&&Object(P.jsxs)("div",{className:"book-info",children:[Object(P.jsx)("h4",{children:"You won't be charged yet"}),Object(P.jsxs)("h3",{children:[Object(P.jsxs)("span",{children:["$",j.toLocaleString("en-US")," X ",this.getTripTime()," night",this.getTripTime()>1&&"s"]})," ",Object(P.jsxs)("span",{children:["$",((c.guests.kids+c.guests.adults)*j*this.getTripTime()).toLocaleString("en-US")]})]}),Object(P.jsxs)("h3",{children:[Object(P.jsx)("span",{children:"Cleaning fee"})," ",Object(P.jsxs)("span",{children:["$",6*this.getTripTime()]})]}),Object(P.jsxs)("h3",{children:[Object(P.jsx)("span",{children:"Service fee"})," ",Object(P.jsxs)("span",{children:["$",17*this.getTripTime()]})]}),Object(P.jsxs)("h5",{children:[Object(P.jsx)("span",{children:"Total"}),Object(P.jsxs)("span",{children:["$",(6*this.getTripTime()*17+(c.guests.kids+c.guests.adults)*j*this.getTripTime()).toLocaleString("en-US")]})]})]})]})]}),Object(P.jsxs)("span",{className:"report-listing-btn",children:[Object(P.jsx)("i",{className:"fab fa-font-awesome-flag"}),Object(P.jsx)("p",{children:"Report this listing"})]})]})})}}]),s}(a.Component),Oe={addOrder:function(e,t,s){return function(){var a=Object(d.a)(l.a.mark((function a(n){var c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z.add(e,t,s);case 3:return c=a.sent,n({type:"ADD_ORDER",order:c}),a.abrupt("return",c);case 8:a.prev=8,a.t0=a.catch(0),console.log("OrderActions: err in addOrder",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},login:de},xe=Object(B.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,trip:e.tripModule.trip}}),Oe)(me),fe=s(56),ge=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={lat:-8.61308,lng:41.1413},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.setState({lat:this.props.pos.lat,lng:this.props.pos.lng})}},{key:"render",value:function(){return Object(P.jsx)("section",{className:"google-map",children:Object(P.jsxs)(fe.Map,{className:"map",google:this.props.google,zoom:14,initialCenter:{lat:this.state.lat,lng:this.state.lng},center:this.state,children:[Object(P.jsx)(fe.Marker,{position:this.state,name:"Current location"}),Object(P.jsx)(fe.InfoWindow,{visible:!0,position:this.state,children:Object(P.jsx)("div",{children:Object(P.jsx)("h1",{children:"Your next trip is here!"})})})]})})}}]),s}(a.Component),ve=Object(fe.GoogleApiWrapper)({apiKey:"AIzaSyCUEnEL-D59JCymx_6jmOZ6FkBaCKTYTTI"})(ge),ye=s(55),ke=s(169),Ne=s(110),we=s(170),Se=s.n(we),Ce=Object(Ne.css)(be||(be=Object(ke.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n"])));function Ue(){var e=Object(a.useState)(!0),t=Object(ye.a)(e,1)[0],s=Object(a.useState)("#FF385C"),n=Object(ye.a)(s,1)[0];return Object(P.jsx)("div",{className:"BeatLoader main-loader page main",children:Object(P.jsx)(Se.a,{color:n,loading:t,css:Ce,size:20})})}var Te=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={stay:null,toggleWish:""},e.scrollUp=function(){window.scroll({top:0,behavior:"smooth"})},e.setWishList=function(){var t=e.props.loggedInUser;t.wishlist&&(-1!==t.wishlist.findIndex((function(t){return t===e.state.stay._id}))&&e.setState(Object(i.a)(Object(i.a)({},e.state),{},{toggleWish:!0})))},e.loadStay=Object(d.a)(l.a.mark((function t(){var s,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props.match.params.stayId,t.next=3,S.getById(s);case 3:a=t.sent,e.setState({stay:a}),e.props.loggedInUser&&e.setWishList();case 6:case"end":return t.stop()}}),t)}))),e.setWishList=function(){var t=e.props.loggedInUser;t.wishlist&&(-1!==t.wishlist.findIndex((function(t){return t===e.state.stay._id}))&&e.setState(Object(i.a)(Object(i.a)({},e.state),{},{toggleWish:!0})))},e.onAddToWishList=function(){var t=e.props.loggedInUser;if(t){if(t.wishlist){var s=t.wishlist.find((function(t){return t===e.state.stay._id}));if(s){var a=t.wishlist.findIndex((function(e){return e===s}));e.setState(Object(i.a)(Object(i.a)({},e.state),{},{toggleWish:!1})),t.wishlist.splice(a,1)}else e.setState(Object(i.a)(Object(i.a)({},e.state),{},{toggleWish:!0})),t.wishlist.push(e.state.stay._id)}else t.wishlist=[e.state.stay._id];e.props.updateUser(t)}else e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("h2",{children:"You must log in frist"}),Object(P.jsx)(b.b,{to:"/login",children:"Login"}),Object(P.jsx)("button",{className:"demo-user-btn",onClick:function(){e.props.login({username:"mor",password:"1111"})},children:"Demo User"})]}))},e.getTotalRate=function(){var t=e.state.stay.reviews.map((function(e){return e.avgRate})),s=t.reduce((function(e,t){return e+=t}),0);return 0===s?"new":(s/t.length).toFixed(2)},e.getStayReviewStatistics=function(){var t=e.state.stay.reviews,s=t.length;if(t){var a={Cleanliness:0,Accuracy:0,Communication:0,Location:0,"Check-in":0,Accessibility:0};for(var n in t.forEach((function(e){for(var t in e.categories)a[t]+=e.categories[t]})),a)a[n]=+(a[n]/s).toFixed(2);var c=[];for(var r in a)c.push(Object(P.jsxs)("div",{className:"ctg-statistics",children:[Object(P.jsx)("h3",{children:r}),Object(P.jsx)(L.a,{count:5,value:a[r],size:20,isHalf:!0,edit:!1,activeColor:"#ff385c"})]},Math.random()));return c}},e.addReview=function(t){var s=e.state.stay;s.reviews.push(t),e.props.updateStay(s),e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"far fa-check-circle"}),Object(P.jsx)("h3",{children:"Your review has been saved"})]}))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scrollUp(),e.next=3,this.loadStay();case 3:this.props.setHomePage("stay");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAmenityIcon",value:function(e){switch(e){case"TV":return Object(P.jsx)("i",{className:"fas fa-tv"});case"Wifi":return Object(P.jsx)("i",{className:"fas fa-wifi"});case"Air conditioning":return Object(P.jsx)("i",{className:"fas fa-fan"});case"Smoking allowed":return Object(P.jsx)("i",{className:"fas fa-smoking"});case"Pets allowed":return Object(P.jsx)("i",{className:"fas fa-paw"});case"Cooking basics":return Object(P.jsx)("i",{className:"fas fa-blender"});default:return Object(P.jsx)("i",{className:"fab fa-airbnb"})}}},{key:"render",value:function(){var e=this,t=this.state.stay;if(!t)return Object(P.jsx)(Ue,{});var s=this.props,a=s.loggedInUser,n=s.toggleMsgModal,c=s.onSearch,r=s.openDynamicModal,i=s.modalType,o=s.setModalContent,l=this.state.toggleWish,d=t.loc,j=t.capacity,u=t.desc,h=t.amenities,p=t.stayType,b=t.propertyType,m=t.reviews,O=t.name,x=t.host;return Object(P.jsxs)("main",{className:"stay-details-container narrow",children:[Object(P.jsxs)("section",{className:"stay-details-header",children:[Object(P.jsx)("h1",{children:O}),Object(P.jsxs)("div",{className:"stay-short-info",children:[Object(P.jsxs)("div",{children:[Object(P.jsxs)("span",{className:"stay-rate-display",children:[Object(P.jsx)("i",{className:"fas fa-star"}),Object(P.jsx)("span",{children:this.getTotalRate()}),Object(P.jsxs)("p",{children:[" ( ",m.length," reviews )"]})]}),Object(P.jsx)("span",{children:"\u2022"}),Object(P.jsx)("p",{children:d.address})]}),Object(P.jsxs)("div",{className:"action-btn-container",children:[Object(P.jsx)("button",{children:Object(P.jsxs)("p",{children:[Object(P.jsx)("i",{className:"fas fa-external-link-alt"}),"share"]})}),Object(P.jsx)("button",{onClick:this.onAddToWishList,className:"stay-save-btn",children:Object(P.jsxs)("p",{children:[Object(P.jsx)("i",{className:l?"fas fa-heart":"far fa-heart"}),"save"]})})]})]})]}),Object(P.jsx)("div",{id:"stay-gallery",className:"stay-gallery",children:t.imgUrls.map((function(e,t){return t<5?Object(P.jsx)("img",{src:e,alt:"stay-gallery-preview-img"},Math.random()):""}))}),Object(P.jsxs)("section",{className:"stay-info-container",children:[Object(P.jsxs)("div",{className:"stay-long-info",children:[Object(P.jsxs)("div",{className:"stay-long-info-header",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("h2",{children:"".concat(b," hosted by ").concat(x.fullname)}),Object(P.jsxs)("span",{children:[j," guests \u2022 ",p," \u2022 ",b]})]}),Object(P.jsx)("img",{src:x.imgUrl,alt:"avatar"})]}),Object(P.jsxs)("div",{className:"stay-feature-container",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-home"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:p}),Object(P.jsx)("h4",{children:"entire place"===p?"You'll have the place to yourself.":"You'll have a private room to yourself."})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-book-open"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"House rules"}),Object(P.jsx)("h4",{children:"This place isn\u2019t suitable for children under 12 and the host doesn\u2019t allow pets."})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-medal"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("h3",{children:[x.fullname," is a Superhost"]}),Object(P.jsx)("h4",{children:"Superhosts are experienced, highly rated hosts who are committed to providing great stays for guests."})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-bookmark"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Wifi"}),Object(P.jsx)("h4",{children:"Guests often search for this popular amenity"})]})]})]}),Object(P.jsxs)("div",{className:"description",children:[Object(P.jsx)("h2",{children:"Description"}),Object(P.jsx)("span",{children:u})]}),Object(P.jsxs)("div",{id:"amenities",className:"amenities-list",children:[Object(P.jsx)("h2",{children:"Amenities"}),Object(P.jsx)("ul",{children:h.map((function(t){return Object(P.jsxs)("li",{children:[Object(P.jsx)("span",{children:e.getAmenityIcon(t)}),Object(P.jsx)("span",{children:t})]},Math.random())}))})]})]}),Object(P.jsx)(xe,{stay:t,getTotalRate:this.getTotalRate,onSearch:c,loggedInUser:a,toggleMsgModal:n,openDynamicModal:r,modalType:i,setModalContent:o})]}),Object(P.jsxs)("section",{className:"stay-review-container",children:[Object(P.jsxs)("div",{className:"stay-review-header",children:[Object(P.jsx)("h2",{children:Object(P.jsxs)("span",{className:"stay-rate-display",children:[Object(P.jsx)("i",{className:"fas fa-star"}),this.getTotalRate()," ",Object(P.jsxs)("p",{children:[" (",m.length," reviews)"]})]})}),Object(P.jsx)("div",{className:"stay-review-ststistics",children:this.getStayReviewStatistics().map((function(e){return e}))})]}),Object(P.jsx)(R,{reviews:m})]}),Object(P.jsx)("section",{className:"stay-review",children:Object(P.jsx)(q,{loggedInUser:a,addReview:this.addReview})}),Object(P.jsxs)("section",{className:"stay-details-map",children:[Object(P.jsx)("h2",{children:"Location"}),Object(P.jsx)("h3",{children:d.address}),Object(P.jsx)(ve,{pos:d})]})]})}}]),s}(a.Component),Me=s.p+"static/media/user-lock.b5a4d298.PNG",De=s.p+"static/media/user-card.45d2a01a.PNG",Ie=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={user:"",isEditMode:!1},e.loadUser=Object(d.a)(l.a.mark((function t(){var s,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.getItem("loggedinUser"),s=JSON.parse(s),t.next=4,se.getById(s._id);case 4:a=t.sent,e.setState({user:a});case 6:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState({user:Object(i.a)(Object(i.a)({},e.state.user),{},Object(F.a)({},a,n))})},e.onUpdateUser=function(){e.props.updateUser(e.state.user),e.toggleEditMode()},e.toggleEditMode=function(){e.setState({isEditMode:!e.state.isEditMode})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.loadUser(),this.props.setFooterDisplay(!1),this.props.setHomePage("user")}},{key:"componentWillUnmount",value:function(){this.props.setFooterDisplay(!0)}},{key:"render",value:function(){var e=this.state.user;if(!e)return Object(P.jsx)("h1",{children:"loading..."});var t=e.fullname,s=e.username,a=e.email,n=e.imgUrl,c=this.state.isEditMode;return Object(P.jsxs)("main",{className:"user-details main page",children:[Object(P.jsx)("h1",{children:"Personal info"}),Object(P.jsxs)("section",{className:"main-user-details",children:[!c&&Object(P.jsxs)("div",{className:"user-details-info",children:[Object(P.jsxs)("div",{className:"user-info-header",children:[Object(P.jsx)("img",{src:n,alt:"avatar"}),Object(P.jsxs)("span",{children:[Object(P.jsx)("h4",{children:"Hello "+t}),Object(P.jsx)("p",{children:"It's nice to have you with us"})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"full name"}),Object(P.jsxs)("p",{children:[" ",t]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"username"}),Object(P.jsx)("p",{children:s})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"email"}),Object(P.jsx)("p",{children:a})]}),Object(P.jsx)("button",{onClick:this.toggleEditMode,children:"Edit"})]}),c&&Object(P.jsxs)("div",{className:"user-details-info user-edit",children:[Object(P.jsxs)("div",{className:"user-info-header",children:[Object(P.jsx)("img",{src:n,alt:"avatar"}),Object(P.jsxs)("span",{children:[Object(P.jsx)("h4",{children:"Hello "+t}),Object(P.jsx)("p",{children:"It's nice to have you with us"})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"full name"}),Object(P.jsx)("p",{children:Object(P.jsx)("input",{type:"text",name:"fullname",autoComplete:"off",onChange:this.handleChange,value:t})})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"username"}),Object(P.jsx)("p",{children:Object(P.jsx)("input",{type:"text",name:"username",autoComplete:"off",onChange:this.handleChange,value:s})})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"email"}),Object(P.jsx)("p",{children:Object(P.jsx)("input",{type:"text",name:"email",autoComplete:"off",onChange:this.handleChange,value:a})})]}),Object(P.jsx)("button",{onClick:this.onUpdateUser,children:"save"})]}),Object(P.jsxs)("section",{className:"general-info-container",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("img",{src:Me,alt:"lock"}),Object(P.jsx)("h3",{children:"Which details can be edited?"}),Object(P.jsx)("p",{children:"Details Airbnb uses to verify your identity can\u2019t be changed. Contact info and some personal details can be edited, but we may ask you verify your identity the next time you book or create a listing."})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("img",{src:De,alt:"card"}),Object(P.jsx)("h3",{children:"What info is shared with others?"}),Object(P.jsx)("p",{children:"Airbnb only releases contact information for hosts and guests after a reservation is confirmed."})]})]})]})]})}}]),s}(a.Component),Ae=s(171),_e=s.n(Ae);function Pe(e){var t=e.stay;return Object(P.jsxs)(_e.a,Object(i.a)(Object(i.a)({},{dots:!1,infinite:!0,arrows:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{className:"stay-preview-slider",children:[Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:t.imgUrls[0],alt:""})}),Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:t.imgUrls[1],alt:""})}),Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:t.imgUrls[2],alt:""})}),Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:t.imgUrls[3],alt:""})})]}))}function Ee(e){var t,s=e.stay,a=e.loggedInUser,n=e.updateUser,c=e.toggleMsgModal,r=e.login,i=e.trip,o=e.addTrip,l=e.stayType,d=e.loadWishlist;return Object(P.jsxs)("section",{className:"stay-preview-container",children:[Object(P.jsxs)(b.b,{to:"/stay/".concat(s._id),onClick:function(){var e=i;e.stay=s,o(e)},className:"stay-preview-link",children:[Object(P.jsx)(Pe,{stay:s}),Object(P.jsxs)("div",{className:"stay-preview-info",children:[Object(P.jsxs)("span",{className:"stay-preview-rate",children:[Object(P.jsx)("i",{className:"fas fa-star"}),Object(P.jsx)("p",{children:function(){var e=s.reviews.map((function(e){return e.avgRate})),t=e.reduce((function(e,t){return e+=t}),0);return 0===t?"new":(t/e.length).toFixed(1)}()}),Object(P.jsxs)("p",{children:["( ",s.reviews.length," )"]})]}),Object(P.jsxs)("h3",{children:[Object(P.jsx)("span",{children:s.propertyType}),"\u2022",Object(P.jsx)("span",{children:s.loc.address.substring(0,s.loc.address.indexOf(","))})]}),Object(P.jsx)("h3",{children:s.name}),Object(P.jsxs)("h3",{className:"stay-price",children:[Object(P.jsxs)("span",{children:["$",s.price]})," / night"]})]})]}),Object(P.jsx)("button",{className:"stay-preview-save-btn",onClick:function(){!function(e){if(!a)return c(Object(P.jsxs)("span",{children:[Object(P.jsx)("h2",{children:"You must log in frist"}),Object(P.jsx)(b.b,{to:"/login",children:"Login"}),Object(P.jsx)("button",{className:"demo-user-btn",onClick:function(){r({username:"mor",password:"1111"})},children:"Demo User"})]})),!1;if(a.wishlist){var t=a.wishlist.findIndex((function(t){return t===e}));-1!==t?a.wishlist.splice(t,1):a.wishlist.push(e)}else a.wishlist=[e];n(a),"wish"===l&&d(a)}(s._id)},children:(t=s._id,a&&a.wishlist&&a.wishlist.find((function(e){return e===t}))?Object(P.jsx)("i",{className:"fas fa-heart"}):Object(P.jsx)("i",{className:"fas fa-heart off"}))})]})}function Re(e){var t=e.stays,s=e.loggedInUser,a=e.updateUser,n=e.toggleMsgModal,c=e.login,r=e.trip,i=e.addTrip,o=e.loadWishlist,l=e.stayType;return Object(P.jsx)("section",{className:"stay-list",children:t.map((function(e){return Object(P.jsx)(Ee,{updateUser:a,loggedInUser:s,stay:e,toggleMsgModal:n,stayType:l,login:c,trip:r,addTrip:i,loadWishlist:o},Math.random())}))})}var Fe=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={dynamicModal:{modalContent:"",modalPosition:{}}},e.onSetModal=function(t,s){var a=t.target.getBoundingClientRect(),n={x:a.x,y:a.y+30};e.setState({dynamicModal:Object(i.a)(Object(i.a)({},e.state.dynamicModal),{},{modalPosition:n})},(function(){e.openModal(s)}))},e.resetFilter=function(){e.setState({stayFilterBy:{placeType:"",propertyType:"",price:250,amenities:{TV:!1,Wifi:!1,"Air conditioning":!1,"Smoking allowed":!1,"Pets allowed":!1,"Cooking basics":!1}}},(function(){e.props.onfilterStays(e.state.stayFilterBy)}))},e.handleChange=function(t,s){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a?e.setState({stayFilterBy:Object(i.a)(Object(i.a)({},e.state.stayFilterBy),{},{amenities:Object(i.a)(Object(i.a)({},e.state.stayFilterBy.amenities),{},Object(F.a)({},t,s))})},(function(){e.openModal("amenities"),e.props.onfilterStays(e.state.stayFilterBy)})):e.setState({stayFilterBy:Object(i.a)(Object(i.a)({},e.state.stayFilterBy),{},Object(F.a)({},t,s))},(function(){"price"===t&&e.openModal("price"),e.props.onfilterStays(e.state.stayFilterBy)}))},e.openModal=function(t){var s=e.state.stayFilterBy,a=s.price,n=s.amenities,c={},r=e.state.dynamicModal.modalPosition,i=r.x,o=r.y;switch(t){case"placeType":c.modalContent=Object(P.jsx)("section",{className:"stay-filter-modal",children:Object(P.jsxs)("div",{className:"modal-label",children:[Object(P.jsxs)("div",{onClick:function(){return e.handleChange("placeType","entire place")},children:[Object(P.jsx)("h4",{children:"Entire place"}),Object(P.jsx)("h5",{children:"You'll have the place to yourself"})]}),Object(P.jsxs)("div",{onClick:function(){return e.handleChange("placeType","private room")},children:[Object(P.jsx)("h4",{children:"Private room"}),Object(P.jsx)("h5",{children:"You'll have a private room to yourself"})]})]})}),c.modalPosition={top:o,left:i};break;case"propertyType":c.modalContent=Object(P.jsx)("section",{className:"stay-filter-modal",children:Object(P.jsxs)("div",{className:"modal-label",children:[Object(P.jsx)("div",{onClick:function(){return e.handleChange("propertyType","loft")},children:Object(P.jsx)("span",{children:"Loft"})}),Object(P.jsx)("div",{onClick:function(){return e.handleChange("propertyType","studio")},children:Object(P.jsx)("span",{children:"Studio"})}),Object(P.jsx)("div",{onClick:function(){return e.handleChange("propertyType","penthouse")},children:Object(P.jsx)("span",{children:"Penthouse"})}),Object(P.jsx)("div",{onClick:function(){return e.handleChange("propertyType","appartment")},children:Object(P.jsx)("span",{children:"Appartment"})}),Object(P.jsx)("div",{onClick:function(){return e.handleChange("propertyType","hotel")},children:Object(P.jsx)("span",{children:"Hotel"})}),Object(P.jsx)("div",{onClick:function(){return e.handleChange("propertyType","villa")},children:Object(P.jsx)("span",{children:"villa"})})]})}),c.modalPosition={top:o,left:i};break;case"price":c.modalContent=Object(P.jsx)("section",{className:"stay-filter-modal",children:Object(P.jsx)("div",{className:"modal-label",children:Object(P.jsxs)("div",{className:"price",children:[Object(P.jsx)("button",{className:"modal-btn",type:"button",onClick:function(){e.handleChange("price",a-10)},children:"-"}),Object(P.jsx)("span",{children:a}),Object(P.jsx)("button",{className:"modal-btn",type:"button",onClick:function(){e.handleChange("price",a+10)},children:"+"})]})})}),c.modalPosition={top:o,left:i};break;case"amenities":c.modalContent=Object(P.jsx)("section",{className:"stay-filter-modal",children:Object(P.jsxs)("div",{className:"modal-label amenities",children:[Object(P.jsx)("div",{className:n.TV?"clicked":"unclicked",onClick:function(){return e.handleChange("TV",!n.TV,!0)},children:Object(P.jsx)("span",{children:"TV"})}),Object(P.jsx)("div",{className:n.Wifi?"clicked":"unclicked",onClick:function(){return e.handleChange("Wifi",!n.Wifi,!0)},children:Object(P.jsx)("span",{children:"Wifi"})}),Object(P.jsx)("div",{className:n["Air conditioning"]?"clicked":"unclicked",onClick:function(){return e.handleChange("Air conditioning",!n["Air conditioning"],!0)},children:Object(P.jsx)("span",{children:"AC"})}),Object(P.jsx)("div",{className:n["Smoking allowed"]?"clicked":"unclicked",onClick:function(){return e.handleChange("Smoking allowed",!n["Smoking allowed"],!0)},children:Object(P.jsx)("span",{children:"Smoking allowed"})}),Object(P.jsx)("div",{className:n["Pets allowed"]?"clicked":"unclicked",onClick:function(){return e.handleChange("Pets allowed",!n["Pets allowed"],!0)},children:Object(P.jsx)("span",{children:"Pets allowed"})}),Object(P.jsx)("div",{className:n["Cooking basics"]?"clicked":"unclicked",onClick:function(){return e.handleChange("Cooking basics",!n["Cooking basics"],!0)},children:Object(P.jsx)("span",{children:"Cooking basics"})})]})}),c.modalPosition={top:o,left:i};break;case"":c.modalContent="",c.modalPosition={top:0,left:0,height:0,width:0}}e.props.setModalContent(c,t)},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.resetFilter()}},{key:"componentDidUpdate",value:function(e){e.modalType!==this.props.modalType&&this.openModal(this.props.modalType)}},{key:"render",value:function(){var e=this;return Object(P.jsxs)("section",{className:"stay-filter",children:[Object(P.jsx)("button",{onClick:function(t){e.onSetModal(t,"placeType")},children:"Type of place"}),Object(P.jsx)("button",{onClick:function(t){e.onSetModal(t,"propertyType")},children:"Property type"}),Object(P.jsx)("button",{onClick:function(t){e.onSetModal(t,"price")},children:"Price"}),Object(P.jsx)("button",{onClick:function(t){e.onSetModal(t,"amenities")},children:"Amenities"}),Object(P.jsx)("button",{onClick:this.resetFilter,children:"Clear"})]})}}]),s}(a.Component),He=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={stays:[]},e.onfilterStays=function(t){var s=Le(e.props.stays,t);e.setState({stays:s})},e.scrollUp=function(){window.scrollTo({top:0,behavior:"smooth"})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.setState({stays:this.props.stays}),this.props.setHomePage("explore"),this.scrollUp()}},{key:"componentDidUpdate",value:function(e){e.stays!==this.props.stays&&this.setState({stays:this.props.stays})}},{key:"render",value:function(){var e=this.props,t=e.trip,s=e.loggedInUser,a=e.updateUser,n=e.openDynamicModal,c=e.closeDynamicModal,r=e.setModalContent,i=e.toggleMsgModal,o=e.login,l=e.addTrip,d=this.state.stays;return d?Object(P.jsxs)("main",{className:"explore-container main page",children:[Object(P.jsxs)("span",{children:[d.length," stays"]}),""===t.loc.address&&Object(P.jsxs)("h1",{children:["Find place to stay ",t&&t.loc&&t.loc.address&&"in ".concat(t.loc.address)]}),""!==t.loc.address&&Object(P.jsxs)("h1",{children:["Stays ",t&&t.loc&&t.loc.address&&"in ".concat(t.loc.address)]}),Object(P.jsx)(Fe,{openDynamicModal:n,closeDynamicModal:c,setModalContent:r,onfilterStays:this.onfilterStays}),Object(P.jsx)(Re,{stays:d,stayType:"explor",updateUser:a,loggedInUser:s,toggleMsgModal:i,login:o,trip:t,addTrip:l})]}):Object(P.jsx)(Ue,{})}}]),s}(a.Component);function Le(e,t){var s=[];return e.forEach((function(e){(function(e,t){return""===t||e.stayType===t})(e,t.placeType)&&function(e,t){return""===t||e.propertyType===t}(e,t.propertyType)&&function(e,t){return e.price<=t}(e,t.price)&&function(e,t){var s=!0,a=function(a){!0!==t[a]||e.amenities.find((function(e){return e===a}))||(s=!1)};for(var n in t)a(n);return s}(e,t.amenities)&&(Math.random()<.5?s.unshift(e):s.push(e))})),s}var We=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).scrollUp=function(){window.scroll({top:0,behavior:"smooth"})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.loadWishlist(this.props.loggedInUser),this.props.setHomePage("wishlist")}},{key:"render",value:function(){var e=this.props,t=e.stays,s=e.loggedInUser,a=e.toggleMsgModal,n=e.login,c=e.updateUser,r=e.trip,i=e.addTrip,o=e.loadWishlist;return this.scrollUp(),Object(P.jsxs)("main",{className:"explore-container wishlist main page",children:[Object(P.jsxs)("span",{children:[t.length," stays"]}),Object(P.jsx)("h1",{children:"Wishlist"}),Object(P.jsx)(Re,{stays:t,stayType:"wish",updateUser:c,toggleMsgModal:a,loggedInUser:s,login:n,trip:r,addTrip:i,loadWishlist:o})]})}}]),s}(a.Component),qe=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={msg:"",loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:"",email:""},formType:"login"},e.loginHandleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState((function(e){return{loginCred:Object(i.a)(Object(i.a)({},e.loginCred),{},Object(F.a)({},a,n))}}))},e.signupHandleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState((function(e){return{signupCred:Object(i.a)(Object(i.a)({},e.signupCred),{},Object(F.a)({},a,n))}}))},e.doLogin=function(){var t=Object(d.a)(l.a.mark((function t(s){var a,n,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),a=e.state.loginCred,n=a.username,c=a.password,n){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:return r={username:n,password:c},t.prev=5,t.next=8,e.props.login(r);case 8:e.props.loggedInUser&&pe.emit("LOGIN",e.props.loggedInUser),e.setState({loginCred:{username:"",password:""}},e.props.history.go(-1)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e.setState({msg:"Login failed, try again."});case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(d.a)(l.a.mark((function t(s){var a,n,c,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),a=e.state.signupCred,n=a.username,c=a.password,r=a.fullname,i=a.email,n&&c&&r&&i){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required"}));case 4:return o={username:n,password:c,fullname:r,email:i},t.next=7,e.props.signup(o);case 7:e.props.loggedInUser&&pe.emit("LOGIN",e.props.loggedInUser),e.setState({signupCred:{username:"",password:"",fullname:"",email:""}},e.props.history.go(-1));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e.toggleFormType=function(){var t="login"===e.state.formType?"signup":"login";e.setState({formType:t})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.setFooterDisplay(!1)}},{key:"componentWillUnmount",value:function(){this.props.setFooterDisplay(!0)}},{key:"render",value:function(){var e=this,t=Object(P.jsxs)("form",{className:"login-form",onSubmit:this.doSignup,children:[Object(P.jsx)("div",{className:"login-form-header",children:Object(P.jsx)("h2",{children:"Sign Up"})}),Object(P.jsxs)("div",{className:"login-form-body",children:[Object(P.jsx)("h1",{children:"Welcome to Home and go"}),Object(P.jsx)("input",{type:"text",name:"fullname",value:this.state.signupCred.fullname,onChange:this.signupHandleChange,placeholder:"Full name",autoComplete:"fullname"}),Object(P.jsx)("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password",autoComplete:"current-password"}),Object(P.jsx)("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username",autoComplete:"username"}),Object(P.jsx)("input",{type:"text",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"email",autoComplete:"email"}),Object(P.jsx)("button",{className:"login-btn",type:"submit",children:"sign up"}),Object(P.jsx)("div",{className:"login-actions-btn",children:Object(P.jsxs)("button",{type:"button",className:"toggle-form-btn",onClick:this.toggleFormType,children:[" ","I already have an account"]})})]})]}),s=Object(P.jsxs)("form",{className:"login-form",onSubmit:this.doLogin,children:[Object(P.jsx)("div",{className:"login-form-header",children:Object(P.jsx)("h2",{children:"Log in"})}),Object(P.jsxs)("div",{className:"login-form-body",children:[Object(P.jsx)("h1",{children:"Welcome back "}),Object(P.jsx)("input",{type:"text",name:"username",autoComplete:"off",value:this.state.loginCred.username,onChange:this.loginHandleChange,placeholder:"Username"}),Object(P.jsx)("input",{type:"password",name:"password",autoComplete:"off",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),Object(P.jsx)("button",{type:"submit",className:"login-btn",children:"submit"}),Object(P.jsxs)("div",{className:"login-actions-btn",children:[Object(P.jsx)("button",{type:"button",className:"toggle-form-btn",onClick:this.toggleFormType,children:"New user?"}),Object(P.jsx)("button",{type:"button",className:"forgot-password-btn",onClick:function(){alert("Tough Luck")},children:"Forgot Password?"})]})]})]}),a=this.props.loggedInUser,n=this.state.formType;return Object(P.jsxs)("main",{className:"login-container main page",children:[Object(P.jsx)("p",{children:this.state.msg}),a&&Object(P.jsx)("button",{onClick:this.props.logout,children:"logged out"}),Object(P.jsxs)("section",{className:"login-forms-container",children:[!a&&"login"===n&&s,!a&&"signup"===n&&t]}),a&&a.isAdmin&&Object(P.jsx)("section",{className:"admin",children:Object(P.jsxs)("details",{children:[Object(P.jsx)("summary",{children:"Admin"}),Object(P.jsx)("button",{onClick:this.props.loadUsers,children:"Refresh Users"}),this.props.isLoading&&Object(P.jsx)(Ue,{}),this.props.users&&Object(P.jsx)("ul",{children:this.props.users.map((function(t){return Object(P.jsxs)("li",{children:[Object(P.jsx)("pre",{children:JSON.stringify(t,null,2)}),Object(P.jsxs)("button",{onClick:function(){e.removeUser(t._id)},children:["Remove ",t.username]})]},Math.random())}))})]})})]})}}]),s}(a.Component),Be={login:de,logout:je,signup:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.signup(e);case 3:a=t.sent,s({type:"SET_USER",user:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in signup",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeUser:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.remove(e);case 3:s({type:"REMOVE_USER",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:le},Ye=Object(B.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser,isLoading:e.systemModule.isLoading}}),Be)(qe);function Ge(e){var t=e.stays,s=e.addTrip;return Object(P.jsx)("section",{className:"filter-gallery",children:t.map((function(e,t){return t<4?Object(P.jsxs)(b.b,{to:"/stay/".concat(e._id),onClick:function(){return function(e){s({guests:{adults:1,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""},stay:e})}(e)},children:[Object(P.jsx)("div",{className:"gallery-preview-img",children:Object(P.jsx)("img",{src:"".concat(e.imgUrls[0]),alt:e.name})}),Object(P.jsx)("h3",{children:e.name})]},Math.random()):""}))})}function Ve(e){var t=e.name,s=e.btnTxt,a=e.title,n=e.subtitle,c=e.loggedInUser;return Object(P.jsx)("section",{className:"banner "+t,children:Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:a}),Object(P.jsx)("h2",{children:n}),"Become a host"===a&&Object(P.jsx)("button",{children:Object(P.jsx)(b.b,{to:c?"/host/".concat(c._id):"/host",children:s})}),"Become a host"!==a&&Object(P.jsx)("button",{children:s})]})})}function $e(e){var t=e.loadStays,s=e.addTrip;function a(){return(a=Object(d.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={guests:{adults:1,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""}},e.next=3,s(a);case 3:t();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(P.jsx)("section",{className:"main-hero full",children:Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Discover stays to live, work, or just relax."}),Object(P.jsx)("button",{onClick:function(){return a.apply(this,arguments)},children:Object(P.jsx)(b.b,{to:"/explore",children:"Explore now"})})]})})}function Je(e){var t=e.onSearch;function s(e){t({guests:{adults:1,kids:0},loc:{address:e},time:{checkIn:"",checkOut:""}})}return Object(P.jsxs)("main",{className:"top-cities-gallery",children:[Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("Hong Kong")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/be4d3ba5-08d7-4afe-95a7-f2da6453886a.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"Hong Kong"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"China"})})]})]}),Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("Bangkok")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/7253e011-7c22-48fd-b75d-d0da35372397.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"Bangkok"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"Thailand"})})]})]}),Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("London")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/52e8083e-2de2-446d-a860-534eab250541.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"London"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"England"})})]})]}),Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("Paris")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/20e74de0-0eb8-4fca-afb8-b111875acdf5.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"Paris"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"France"})})]})]}),Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("Dubai")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/e639b7ab-aee3-48ee-9743-216684a51319.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"Dubai"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"United Arab Emirates"})})]})]}),Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("New York")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/ca3737ef-0faf-46ba-b055-b4a2d99e2cea.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"New York"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"United States"})})]})]}),Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("Amsterdam")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/585d1e53-e2e1-4baf-a34e-36301dd1e2da.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"Amsterdam"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"Netherlands"})})]})]}),Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){s("Tel Aviv")},className:"top-cities-card",children:[Object(P.jsx)("img",{src:"https://a0.muscache.com/im/pictures/7c309a70-bc93-4603-8d3b-9d4cd9bf75b2.jpg?im_q=medq&im_w=240",alt:"TopCities"}),Object(P.jsxs)("div",{className:"city-details-container",children:[Object(P.jsx)("h3",{children:"Tel Aviv"}),Object(P.jsx)("div",{className:"city-details",children:Object(P.jsx)("h4",{children:"Israel"})})]})]})]})}var ze=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).scrollUp=function(){window.scrollTo({top:0,behavior:"smooth"})},e.explorAll=Object(d.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={guests:{adults:1,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""}},t.next=3,e.props.addTrip(s);case 3:e.props.loadStays();case 4:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.setHomePage("home"),this.scrollUp()}},{key:"componentWillUnmount",value:function(){this.props.setHomePage("")}},{key:"render",value:function(){var e=this.props,t=e.loggedInUser,s=e.onSearch,a=e.topRatedStays,n=e.nearbayStays,c=e.loadStays,r=e.addTrip;return Object(P.jsxs)("main",{className:"home-page main",children:[Object(P.jsx)($e,{loadStays:c,addTrip:r}),Object(P.jsx)("h1",{children:"Popular destinations"}),Object(P.jsx)(Je,{onSearch:s}),Object(P.jsxs)("div",{className:"filter-gallery-header",children:[Object(P.jsx)("h1",{children:"Explore nearby"}),Object(P.jsx)(b.b,{to:"/explore",onClick:this.explorAll,children:"Show more"})]}),Object(P.jsx)(Ge,{stays:n,addTrip:r}),Object(P.jsx)(Ve,{name:"banner-top",btnTxt:"Get inspired",title:"The Gearest Outdoors",subtitle:"Wishlists curated by Airbnb."}),Object(P.jsxs)("div",{className:"filter-gallery-header",children:[Object(P.jsx)("h1",{children:"Top Rated"}),Object(P.jsx)(b.b,{to:"/explore",onClick:this.explorAll,children:"Show more"})]}),Object(P.jsx)(Ge,{stays:a,addTrip:r}),Object(P.jsx)(Ve,{name:"banner-bottom",btnTxt:"Learn more",title:"Become a host",subtitle:"earn extra income and unlock new opportunities by sharing your space.",loggedInUser:t})]})}}]),s}(a.Component),Ke=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={trip:{guests:{adults:1,kids:0},loc:{address:"",stay:null},time:{checkIn:"",checkOut:""}},topRatedStays:[],dynamicModal:{modalContent:"",modalPosition:{top:0,left:0,height:0}}},e.onSetModal=function(t,s){var a={x:t.pageX,y:t.pageY};e.setState({dynamicModal:Object(i.a)(Object(i.a)({},e.state.dynamicModal),{},{modalPosition:a})},(function(){e.openModal(s)}))},e.handleDates=function(t){var s=t.startDate.toDateString(),a=t.endDate.toDateString();e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{time:{checkIn:s,checkOut:a}})})},e.openModal=function(t){var s={},a=e.state.dynamicModal.modalPosition,n=a.x,c=a.y;switch(t){case"date":s.modalContent=Object(P.jsx)("section",{className:"dynamic-modal-child book-date-modal",children:Object(P.jsx)(G,{handleDates:e.handleDates})}),s.modalPosition={top:c+35,left:n};break;case"loc":s.modalContent=Object(P.jsx)("section",{className:"dynamic-modal-child filter-loc-modal",children:V.getTopCities().map((function(t){return Object(P.jsxs)("div",{onClick:function(){e.handleChange({target:{name:"address",type:"search",value:"".concat(t.city)}})},className:"modal-label",children:[Object(P.jsx)("img",{src:t.imgUrl,alt:"city"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:t.city}),Object(P.jsx)("span",{children:t.state})]})]},Math.random())}))}),s.modalPosition={top:c+35,left:n};break;case"guests":var r=e.state.trip.guests,i=r.kids,o=r.adults;s.modalContent=Object(P.jsxs)("section",{className:"dynamic-modal-child filter-guest-modal",children:[Object(P.jsxs)("div",{className:"modal-label",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Adults"}),Object(P.jsx)("span",{children:"Ages 13 or above"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{type:"button",onClick:function(){e.handleChange({target:{name:"adults",type:"number",value:o-1}})},children:"-"}),Object(P.jsx)("span",{children:o}),Object(P.jsx)("button",{type:"button",onClick:function(){e.handleChange({target:{name:"adults",type:"number",value:o+1}})},children:"+"})]})]}),Object(P.jsxs)("div",{className:"modal-label",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Kids"}),Object(P.jsx)("span",{children:"Ages 2\u201312"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{type:"button",onClick:function(){e.handleChange({target:{name:"kids",type:"number",value:i-1}})},children:"-"}),Object(P.jsx)("span",{children:i}),Object(P.jsx)("button",{type:"button",onClick:function(){e.handleChange({target:{name:"kids",type:"number",value:i+1}})},children:"+"})]})]})]}),s.modalPosition={top:c+35,left:n};break;case"":s.modalContent="",s.modalPosition={top:0,left:0,height:0}}e.props.setModalContent(s,t)},e.loadTrip=function(){var t=e.props.trip;t||(t={guests:{adults:1,kids:0},loc:{address:"",stay:null},time:{checkIn:"",checkOut:""}}),e.setState({trip:t})},e.handleChange=function(t){t.timeStamp&&t.preventDefault();var s=t.target,a=s.name,n=s.value,c=s.type;if("date"===c)e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{time:Object(i.a)(Object(i.a)({},e.state.trip.time),{},Object(F.a)({},a,n))})});else if("number"===c){if(n<0)return;e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{guests:Object(i.a)(Object(i.a)({},e.state.trip.guests),{},Object(F.a)({},a,+n))})},(function(){e.openModal("guests")}))}else e.setState({trip:Object(i.a)(Object(i.a)({},e.state.trip),{},{loc:Object(i.a)(Object(i.a)({},e.state.trip.loc),{},Object(F.a)({},a,n))})})},e.onSearch=function(t){t.preventDefault(),e.props.onSearch(e.state.trip),e.onSetModal(t,"")},e.loadRated=Object(d.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.getTopRatedStays();case 2:s=t.sent,e.setState({topRatedStays:s});case 4:case"end":return t.stop()}}),t)}))),e.handle=function(){},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.loadRated(),this.loadTrip()}},{key:"componentDidUpdate",value:function(e){e.trip!==this.props.trip&&this.loadTrip(),e.modalType!==this.props.modalType&&this.openModal(this.props.modalType)}},{key:"render",value:function(){var e=this,t=this.props,s=t.isFullHeader,a=t.openFullHeader,n=this.state.trip,c=n.loc,r=n.time,i=n.guests,o=c.address,l=r.checkIn,d=r.checkOut,j=i.kids,u=i.adults;return Object(P.jsxs)("section",{className:"main-filter-container",children:[Object(P.jsxs)("form",{className:s?"max-filter":"filter-close",children:[Object(P.jsxs)("label",{children:[Object(P.jsx)("span",{children:"Location"}),Object(P.jsx)("input",{onClick:function(t){return e.onSetModal(t,"loc")},name:"address",value:o,autoComplete:"off",id:"location",type:"search",placeholder:"Where are you going?",onChange:this.handleChange})]}),Object(P.jsxs)("label",{htmlFor:"check-in",children:[Object(P.jsx)("span",{children:"Check in"}),Object(P.jsx)("input",{value:l,id:"check-in",autoComplete:"off",placeholder:"Add dates",onClick:function(t){return e.onSetModal(t,"date")},onChange:this.handle})]}),Object(P.jsxs)("label",{htmlFor:"check-out",children:[Object(P.jsx)("span",{children:"Check out"}),Object(P.jsx)("input",{value:d,id:"check-out",autoComplete:"off",placeholder:"Add dates",onClick:function(t){return e.onSetModal(t,"date")},onChange:this.handle})]}),Object(P.jsx)("label",{className:"guests",htmlFor:"guests",children:Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Guests"}),Object(P.jsx)("input",{onClick:function(t){e.onSetModal(t,"guests")},value:j+u+"  guests",id:"guests",name:"guests",placeholder:"Add guests",onChange:this.handle})]})}),Object(P.jsx)("button",{onClick:this.onSearch,children:Object(P.jsx)(b.b,{to:"/explore",children:Object(P.jsx)("i",{className:"fas fa-search"})})})]}),Object(P.jsxs)("form",{className:s?"filter-close":"min-filter",onClick:a,children:[Object(P.jsx)("span",{children:o||"Start your search"}),Object(P.jsx)("button",{onClick:this.onSearch,children:Object(P.jsxs)(b.b,{to:"/explore",children:[Object(P.jsx)("i",{className:"fas fa-search"})," "]})})]})]})}}]),s}(a.Component);function Xe(e){var t=e.logout,s=e.toggleUserMenu,a=e.loggedInUser,n=e.modalPosition,c=e.isNewNotif;return Object(P.jsxs)("section",{className:"user-menu",style:{top:n.y+40,left:n.x},onClick:s,children:[!a&&Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{children:Object(P.jsx)(b.b,{to:"/login",children:"log in"})}),Object(P.jsxs)("div",{children:[Object(P.jsx)(b.b,{to:"/host",children:"Host your home"}),Object(P.jsx)(b.b,{to:"/about",children:"about"}),Object(P.jsx)(b.b,{to:"/help",children:"help"})]})]}),a&&Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(b.b,{to:"/",children:"Messages"}),!c&&Object(P.jsx)(b.b,{className:"notif",to:"/notif",children:"Notifications"}),c&&Object(P.jsxs)(b.b,{className:"notif",to:"/notif",children:[Object(P.jsx)("p",{children:"Notifications"}),Object(P.jsx)("div",{className:"notif-circle"})]}),Object(P.jsx)(b.b,{to:"/orders",children:"Trips"}),Object(P.jsx)(b.b,{to:"/wishlist",children:"wish list"}),a.isHost&&Object(P.jsx)(b.b,{to:"/host/".concat(a._id),children:"Dashboard"}),!a.isHost&&Object(P.jsx)(b.b,{to:"/host",children:"Host your home"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)(b.b,{to:"/user",children:"account"}),Object(P.jsx)(b.b,{to:"/help",children:"help"}),Object(P.jsxs)(b.b,{to:"/",children:[" ",Object(P.jsx)("button",{onClick:function(){t()},children:"logout"})," "]})]})]})]})}var Ze=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isFullHeader:!0,isWindowTop:!0,isHomePage:!1,modalPosition:{x:0,y:0},isNarrow:!1,isDetailsHeader:!1},e.openDetailsHeader=function(){window.scrollY>1500?e.setState({isDetailsHeader:!0}):e.setState({isDetailsHeader:!1})},e.explorAll=Object(d.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={guests:{adults:1,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""}},t.next=3,e.props.addTrip(s);case 3:e.props.loadStays();case 4:case"end":return t.stop()}}),t)}))),e.toggleUserMenu=function(t){var s=t.target.getBoundingClientRect();e.setState({modalPosition:s}),e.props.openDynamicModal("user-menu",t)},e.closeFullHeader=function(t){t.target.closest(".main-filter-container")||t.target.closest(".dynamic-modal-child")||e.setState({isFullHeader:!1},(function(){window.removeEventListener("click",e.closeFullHeader,!0)}))},e.openFullHeader=function(){e.setState({isFullHeader:!0},(function(){window.addEventListener("click",e.closeFullHeader,!0)}))},e.getScrollPos=function(){window.scrollY<100?e.setState({isWindowTop:!0,isFullHeader:!0}):e.setState({isWindowTop:!1,isFullHeader:!1})},e.scrollTo=function(e){window.scrollTo({top:e,left:0,behavior:"smooth"})},e.getAvgRate=function(e){var t=e.reviews.map((function(e){return e.avgRate})),s=t.reduce((function(e,t){return e+=t}),0);return 0===s?"new":(s/t.length).toFixed(1)},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.setCurrPage()}},{key:"componentDidUpdate",value:function(e){e.currPage!==this.props.currPage&&this.setCurrPage()}},{key:"setCurrPage",value:function(){"home"===this.props.currPage?(window.addEventListener("scroll",this.getScrollPos,!0),window.removeEventListener("scroll",this.openDetailsHeader,!0),this.setState({isHomePage:!0,isFullHeader:!0,isWindowTop:!0,isNarrow:!1,isDetailsHeader:!1})):"stay"===this.props.currPage?(window.addEventListener("scroll",this.openDetailsHeader,!0),window.removeEventListener("scroll",this.getScrollPos,!0),this.setState({isHomePage:!1,isFullHeader:!1,isWindowTop:!1,isNarrow:!0})):(window.removeEventListener("scroll",this.getScrollPos,!0),window.removeEventListener("scroll",this.openDetailsHeader,!0),this.setState({isHomePage:!1,isFullHeader:!1,isWindowTop:!1,isNarrow:!1,isDetailsHeader:!1}))}},{key:"render",value:function(){var e=this,t=this.props,s=t.onSearch,a=t.loggedInUser,n=t.logout,c=t.trip,r=t.openDynamicModal,i=t.modalType,o=t.setModalContent,l=t.isNewNotif,d=this.state,j=d.isFullHeader,u=d.isWindowTop,h=d.modalPosition,p=d.isNarrow,m=d.isDetailsHeader,O=a?a.imgUrl:W;return Object(P.jsxs)("header",{className:"main-header ".concat(j&&"full-header"," ").concat(u&&"full-header top"," ").concat(p?"narrow-header":"wide-header"," ").concat(m&&"details-header"),children:[Object(P.jsxs)("section",{className:"details-header-nav",children:[Object(P.jsxs)("div",{className:"details-nav",children:[Object(P.jsx)("span",{onClick:function(){e.scrollTo(0)},children:"Photos"}),Object(P.jsx)("span",{onClick:function(){e.scrollTo(1210)},children:"Amenities"}),Object(P.jsx)("span",{onClick:function(){e.scrollTo(1580)},children:"Reviews"}),Object(P.jsx)("span",{onClick:function(){e.scrollTo(2100)},children:"Location"})]}),Object(P.jsxs)("div",{className:"book-stay-mini",children:[Object(P.jsxs)("div",{children:[Object(P.jsxs)("h3",{children:[Object(P.jsxs)("span",{children:["$ ",c&&c.stay&&c.stay.price?c.stay.price.toLocaleString("en-US"):0]})," / night"]}),Object(P.jsxs)("h4",{children:[Object(P.jsx)("i",{className:"fas fa-star"}),c&&c.stay&&c.stay.reviews?this.getAvgRate(c.stay):""," ",Object(P.jsxs)("span",{children:["( ",c&&c.stay&&c.stay.reviews?c.stay.reviews.length+" reviews":"new"," )"]})]})]}),Object(P.jsxs)("section",{className:"book-stay-btn-container",onClick:function(){e.scrollTo(650)},children:[Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"cell"}),Object(P.jsx)("div",{className:"content",children:Object(P.jsx)("button",{className:"square",children:Object(P.jsx)("p",{children:"Check availability"})})})]})]})]}),Object(P.jsxs)("section",{children:[Object(P.jsx)(b.c,{className:"logo-link",to:"/",children:Object(P.jsxs)("h1",{className:"logo",children:["Home",Object(P.jsx)("i",{className:"fab fa-airbnb"}),"Go"]})}),Object(P.jsx)(b.c,{className:"mini-logo-link",to:"/",children:Object(P.jsx)("i",{className:"fab fa-airbnb"})}),Object(P.jsxs)("nav",{children:[Object(P.jsx)(b.b,{to:a?"/host/".concat(a._id):"/host",children:"Become a host"}),Object(P.jsx)(b.c,{to:"/explore",onClick:this.explorAll,children:"Explore"}),Object(P.jsxs)("button",{onClick:this.toggleUserMenu,className:"user-menu-btn",children:[Object(P.jsx)("span",{children:Object(P.jsx)("i",{className:"fas fa-bars"})}),Object(P.jsx)("img",{src:O,alt:"avatar"}),l&&Object(P.jsx)("div",{className:"notif-circle"})]})]}),"user-menu"===i&&Object(P.jsx)(Xe,{logout:n,loggedInUser:a,toggleUserMenu:this.toggleUserMenu,modalPosition:h,isNewNotif:l})]}),Object(P.jsx)(Ke,{trip:c,modalType:i,onSearch:s,openDynamicModal:r,isFullHeader:j,openFullHeader:this.openFullHeader,toggleFullHeader:this.toggleFullHeader,setModalContent:o})]})}}]),s}(n.a.Component);function Qe(e){var t=e.onSearch,s=e.topRatedStays,a=e.nearbayStays;var n=V.getTopCities();return Object(P.jsxs)("section",{className:"footer-links-container",children:[Object(P.jsx)("h3",{children:"Inspiration for future getaways"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"Top Rated"}),s.map((function(e){return Object(P.jsxs)(b.b,{to:"/stay/".concat(e._id),children:[Object(P.jsx)("span",{children:e.name}),Object(P.jsx)("span",{children:e.loc.address})]},Math.random())}))]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"Nearby"}),a.map((function(e){return Object(P.jsxs)(b.b,{to:"/stay/".concat(e._id),children:[Object(P.jsx)("span",{children:e.name}),Object(P.jsx)("span",{children:e.loc.address})]},Math.random())}))]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:"Cities"}),n.map((function(e){return Object(P.jsxs)(b.b,{to:"/explore",onClick:function(){var s;s="".concat(e.city),t({guests:{adults:1,kids:0},loc:{address:s},time:{checkIn:"",checkOut:""}}),window.scroll({top:0})},children:[Object(P.jsx)("span",{children:e.city}),Object(P.jsx)("span",{children:e.state})]},Math.random())}))]})]})]})}function et(e){var t=e.onSearch,s=e.topRatedStays,a=e.nearbayStays;return Object(P.jsx)("footer",{className:"main-footer full",children:Object(P.jsxs)("section",{children:[Object(P.jsx)(Qe,{onSearch:t,topRatedStays:s,nearbayStays:a}),Object(P.jsxs)("section",{className:"footer-nav-container",children:[Object(P.jsxs)("div",{children:[Object(P.jsxs)("p",{children:["\xa9 2021 Home & Go, ",Object(P.jsx)("span",{children:"Inc."})]}),Object(P.jsx)("span",{children:"\xb7"}),Object(P.jsx)(b.b,{to:"/about",children:"About"}),Object(P.jsx)("span",{children:"\xb7"}),Object(P.jsx)(b.b,{to:"/login",children:"Login"}),Object(P.jsx)("span",{children:"\xb7"}),Object(P.jsx)(b.b,{to:"/host",children:"Become a host"})]}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("p",{children:[Object(P.jsx)("i",{className:"fas fa-globe"}),Object(P.jsx)("span",{children:"English (US)"}),Object(P.jsx)("span",{children:"$ US"})]}),Object(P.jsxs)("p",{children:[Object(P.jsx)("i",{className:"fab fa-facebook-f"}),Object(P.jsx)("i",{className:"fab fa-twitter"}),Object(P.jsx)("i",{className:"fab fa-instagram"})]})]})]})]})})}function tt(e){var t=e.onSelectAction;return Object(P.jsxs)("div",{className:"dash-nav-container",children:[Object(P.jsxs)("button",{className:"add-stay-btn",value:"add stay",onClick:t,children:[Object(P.jsx)("i",{className:"fas fa-plus"}),"Add Stay"]}),Object(P.jsxs)("button",{value:"my Stays",onClick:t,children:[Object(P.jsx)("i",{className:"fas fa-house-user"}),"My Stays"]}),Object(P.jsxs)("button",{value:"orders",onClick:t,children:[Object(P.jsx)("i",{className:"fas fa-clipboard-list"}),"Orders"]}),Object(P.jsxs)("button",{value:"rate stat",onClick:t,children:[Object(P.jsx)("i",{className:"fas fa-star"}),"Rates"]})]})}function st(e){var t=e.stays,s=e.orders,a=e.orderChangeStatus;function n(e){var t=0;return s.forEach((function(s){s.status===e&&t++})),t}function c(){var e=[],t=new Date(Date.now());return s.forEach((function(s){var a=new Date(s.startDate),n=new Date(s.endDate);a<t&&n>t&&e.push(s)})),e}return Object(P.jsxs)("section",{className:"dash-header",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Total Rate"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"fas fa-star"}),function(){var e=0;return t.forEach((function(t){var s=t.reviews.map((function(e){return e.avgRate})),a=s.reduce((function(e,t){return e+t}),0);e+=a/s.length})),e/t.length?(e/t.length).toFixed(1):0}()]}),Object(P.jsxs)("p",{children:[a,"%",Object(P.jsx)("i",{className:"fas fa-long-arrow-alt-up"})]})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"monthly earning"}),Object(P.jsx)("div",{children:Object(P.jsxs)("span",{children:["$ ",function(){var e=0,t=new Date(Date.now()).getMonth()+1,a=new Date(Date.now()).getFullYear();return s.forEach((function(s){var n=new Date(s.startDate).getMonth()+1,c=new Date(s.startDate).getFullYear();t===n&&a===c&&(e+=s.totalPrice)})),e.toLocaleString("en-US")}()]})})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Orders"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:s.length}),Object(P.jsxs)("div",{className:"circle-container",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{title:"pending",className:"circle circle-yellow"}),Object(P.jsx)("p",{children:n("wait for approval")})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{title:"approved",className:"circle circle-green"}),Object(P.jsx)("p",{children:n("approved")})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{title:"decline",className:"circle circle-red"}),Object(P.jsx)("p",{children:n("declined")})]})]})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Active Guests"}),Object(P.jsx)("span",{children:c().length})]}),Object(P.jsx)("div",{children:c().map((function(e){return Object(P.jsx)("img",{src:e.user.imgUrl,alt:"guest"},Math.random())}))})]})]})}function at(e){var t=e.stay,s=e.onSelectedEditStay;return Object(P.jsxs)("div",{className:"host-stay-preview",children:[Object(P.jsx)("span",{children:Object(P.jsx)("img",{src:t.imgUrls[0],alt:"stay"})}),Object(P.jsx)("span",{children:Object(P.jsx)(b.b,{to:"/stay/".concat(t._id),children:t.name})}),Object(P.jsx)("span",{children:Object(P.jsx)(b.b,{to:"/stay/".concat(t._id),children:t.loc.address})}),Object(P.jsx)("span",{children:Object(P.jsxs)(b.b,{to:"/stay/".concat(t._id),children:["$ ",t.price]})}),Object(P.jsx)("span",{className:"stay-actions",children:Object(P.jsxs)("button",{onClick:function(){return s(t)},children:[Object(P.jsx)("i",{className:"far fa-edit"}),"Edit"]})})]})}function nt(e){var t=e.stays,s=e.onSelectedEditStay,a=e.onSelectAction;return Object(P.jsx)("section",{className:"host-stay-list",children:Object(P.jsxs)("div",{className:"host-stay-list-table",children:[Object(P.jsx)("div",{className:"thead",children:Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:""}),Object(P.jsx)("span",{children:"Name"}),Object(P.jsx)("span",{children:"Address"}),Object(P.jsx)("span",{children:"Price"}),Object(P.jsx)("span",{className:"stay-actions",children:"Actions"})]})}),Object(P.jsxs)("div",{className:"tbody",children:[!t.length&&Object(P.jsxs)("h1",{className:"empty-msg",children:["No Stays to show yet, you can add new stay on the ",Object(P.jsx)("button",{value:"add stay",onClick:a,children:"Add Stay "})," tab"]}),t.length>0&&t.map((function(e){return Object(P.jsx)(at,{stay:e,onSelectedEditStay:s},Math.random())}))]})]})})}function ct(e){var t=e.stays,s=e.onSelectedEditStay,a=e.onSelectAction;return t?Object(P.jsx)("section",{className:"host-stay-container",children:Object(P.jsx)(nt,{stays:t,onSelectedEditStay:s,onSelectAction:a})}):Object(P.jsx)(Ue,{})}function rt(e){var t=e.stays,s=e.updateSelectedStay;return Object(P.jsx)("section",{className:"host-rate-card",children:t.map((function(e){return Object(P.jsxs)("label",{onClick:function(){s(e)},children:[Object(P.jsx)("img",{src:e.imgUrls[0],alt:"stay-preview"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h4",{children:e.name}),Object(P.jsx)("h6",{children:"".concat(e.loc.address)}),Object(P.jsx)("h6",{children:"".concat(e.capacity," Guests")})]})]},Math.random())}))})}var it=s(175);function ot(e){var t={labels:["1 Star","2 Star","3 Star","4 Star","5 Star"],datasets:[{label:"# of Votes",data:e.stay.reviews.reduce((function(e,t){return e[Math.round(t.avgRate)-1]++,e}),[0,0,0,0,0]),backgroundColor:["rgba(255, 61, 61, 0.5)","rgba(255, 163, 59, 0.5)","rgba(252, 255, 71, 0.5)","rgba(184, 255, 103, 0.5)","rgba(66, 245, 110, 0.5)"],borderColor:["rgba(255, 61, 61, 0.8)","rgba(255, 163, 59, 0.8)","rgba(252, 255, 71, 0.8)","rgba(184, 255, 103, 0.5)","rgba(66, 245, 110, 0.8)"],borderWidth:1}]};return Object(P.jsx)("div",{className:"rate-chart",children:Object(P.jsx)(it.a,{data:t})})}var lt=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={stay:null},e.updateSelectedStay=function(t){e.setState({stay:t})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.setState({stay:this.props.stays[0]})}},{key:"render",value:function(){var e=this.props.stays,t=this.state.stay;return Object(P.jsx)("section",{className:"dash-rate-statistics-container",children:Object(P.jsxs)("div",{className:"dash-rate-statistics",children:[Object(P.jsx)(rt,{stays:e,updateSelectedStay:this.updateSelectedStay}),t&&Object(P.jsxs)("div",{className:"chart-container",children:[Object(P.jsx)("h3",{children:t.name}),Object(P.jsx)(ot,{stay:t})]})]})})}}]),s}(a.Component);function dt(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.update(e);case 3:a=t.sent,s({type:"UPDATE_STAY",stay:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("StayActions: err in update Stay",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function jt(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.remove(e);case 3:s({type:"REMOVE_STAY",stayId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("StayActions: err in removeStay",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function ut(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.getHostStays(e);case 3:a=t.sent,s({type:"SET_HOST_STAYS",stays:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("StayActions: err in loadHostStays",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var ht={uploadImg:function(e){var t="https://api.cloudinary.com/v1_1/".concat("home-to-go","/image/upload"),s=new FormData;return s.append("file",e.target.files[0]),s.append("upload_preset","aui0olgm"),fetch(t,{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};var pt=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={imgUrl:null,height:60,width:60,isUploading:!1},e.uploadImg=function(){var t=Object(d.a)(l.a.mark((function t(s){var a,n,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploading:!0}),t.next=3,ht.uploadImg(s);case 3:a=t.sent,n=a.secure_url,c=a.height,r=a.width,e.setState({isUploading:!1,imgUrl:n,height:c,width:r},(function(){e.props.onUploadImg(e.state,e.props.position)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.userImgUrl;e&&this.setState({imgUrl:e})}},{key:"uploadMsg",get:function(){var e=this.state,t=e.imgUrl,s=e.isUploading;return t?"Upload Another?":s?"Uploading....":"Upload Image"}},{key:"render",value:function(){var e=this.state.imgUrl,t={backgroundImage:"url(".concat(e,")")};return Object(P.jsx)("div",{className:"upload-preview",style:t,children:Object(P.jsxs)("label",{className:"img-upload-label",htmlFor:"imgUpload",children:[this.uploadMsg,Object(P.jsx)("input",{type:"file",onChange:this.uploadImg,accept:"img/*",className:"img-upload-btn",id:"imgUpload"})]})})}}]),s}(a.Component),bt=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={stay:{name:"",imgUrls:[],price:"",desc:"",capacity:"",amenities:{TV:!0,Wifi:!1,"Air conditioning":!1,"Smoking allowed":!1,"Pets allowed":!1,"Cooking basics":!1},stayType:"entire place",propertyType:"appartment",host:{_id:e.props.loggedInUser._id,fullname:e.props.loggedInUser.fullname,imgUrl:e.props.loggedInUser.imgUrl},loc:{country:"",countryCode:"",address:"",lat:0,lng:0},reviews:[]}},e.onRemoveStays=function(){var t=Object(d.a)(l.a.mark((function t(s,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.target.value="my Stays",t.next=3,e.props.removeStay(a);case 3:e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"far fa-check-circle"}),Object(P.jsx)("h3",{children:"Your stay has been deleted"})]})),e.props.onSelectAction(s);case 5:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),e.onUploadImg=function(t,s){var a=e.state.stay.imgUrls;a[s]=t.imgUrl,e.setState({stay:Object(i.a)(Object(i.a)({},e.state.stay),{},{imgUrls:a})})},e.handleChange=function(t){var s=t.target,a=s.name,n=s.value,c=s.id,r=s.checked;n="price"===a||"capacity"===a?+n:n,"amenities"===a?e.setState({stay:Object(i.a)(Object(i.a)({},e.state.stay),{},{amenities:Object(i.a)(Object(i.a)({},e.state.stay.amenities),{},Object(F.a)({},c,r))})}):"address"===a?e.setState({stay:Object(i.a)(Object(i.a)({},e.state.stay),{},{loc:Object(i.a)(Object(i.a)({},e.state.stay.loc),{},Object(F.a)({},a,n))})}):e.setState({stay:Object(i.a)(Object(i.a)({},e.state.stay),{},Object(F.a)({},a,n))})},e.onSaveStay=function(t){t.preventDefault(),t.target.value="my Stays";var s=e.state.stay,a=s.amenities,n=[];for(var c in a)a[c]&&n.push(c);s.amenities=n,s._id?(e.props.updateStay(s),e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"far fa-check-circle"}),Object(P.jsx)("h3",{children:"Your stay has been updated"})]}))):(e.props.addStay(s),e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"far fa-check-circle"}),Object(P.jsx)("h3",{children:"Your stay has been added"})]}))),e.props.onSelectAction(t)},e.getTotalRate=function(){var t=e.state.stay.reviews.map((function(e){return e.avgRate})),s=t.reduce((function(e,t){return e+=t}),0);return 0===s?"new":(s/t.length).toFixed(2)},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){if(this.props.stayEdit){var e={};this.props.stayEdit.amenities.forEach((function(t){e[t]=!0})),this.setState({stay:Object(i.a)(Object(i.a)({},this.props.stayEdit),{},{amenities:e})})}else this.loadStay()}},{key:"loadStay",value:function(){var e=this;if(this.props.match&&this.props.match.params){var t=this.props.match.params.stayId;t&&S.getById(t).then((function(t){e.setState({stay:t})}))}}},{key:"render",value:function(){var e=this,t=this.state.stay;return this.props.stayEdit&&!t.imgUrls[0]?"":t?Object(P.jsx)("section",{className:"stay-edit-container",children:Object(P.jsxs)("form",{className:"stay-edit-form",onSubmit:this.onSaveStay,children:[Object(P.jsxs)("section",{className:"stay-edit-header",children:[Object(P.jsxs)("div",{className:"stay-edit-header-name",children:[Object(P.jsx)("h1",{children:Object(P.jsx)("input",{type:"text",name:"name",autoComplete:"off",onChange:this.handleChange,value:t.name,placeholder:"stay name",required:!0})}),this.props.stayEdit&&Object(P.jsxs)("button",{type:"button",className:"remove-btn",onClick:function(t){return e.onRemoveStays(t,e.props.stayEdit._id)},children:[Object(P.jsx)("i",{className:"far fa-trash-alt"}),"Remove"]})]}),Object(P.jsxs)("div",{className:"stay-edit-short-info",children:[Object(P.jsxs)("div",{children:[Object(P.jsxs)("span",{className:"stay-rate-display",children:[Object(P.jsx)("i",{className:"fas fa-star"}),Object(P.jsx)("span",{children:this.getTotalRate()}),Object(P.jsxs)("p",{children:[" ( ",t.reviews.length," reviews )"]})]}),Object(P.jsx)("span",{children:"\u2022"}),Object(P.jsxs)("p",{children:["Address:",Object(P.jsx)("input",{type:"text",name:"address",autoComplete:"off",onChange:this.handleChange,value:t.loc.address,required:!0})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{type:"button",children:Object(P.jsxs)("p",{children:[Object(P.jsx)("i",{className:"fas fa-external-link-alt"}),"share"]})}),Object(P.jsx)("button",{type:"button",className:"stay-save-btn",children:Object(P.jsxs)("p",{children:[Object(P.jsx)("i",{className:"far fa-heart"}),"save"]})})]})]})]}),Object(P.jsxs)("div",{className:"stay-gallery",children:[Object(P.jsx)(pt,{userImgUrl:t.imgUrls[0],onUploadImg:this.onUploadImg,position:0}),Object(P.jsx)(pt,{userImgUrl:t.imgUrls[1],onUploadImg:this.onUploadImg,position:1}),Object(P.jsx)(pt,{userImgUrl:t.imgUrls[2],onUploadImg:this.onUploadImg,position:2}),Object(P.jsx)(pt,{userImgUrl:t.imgUrls[3],onUploadImg:this.onUploadImg,position:3}),Object(P.jsx)(pt,{userImgUrl:t.imgUrls[4],onUploadImg:this.onUploadImg,position:4})]}),Object(P.jsxs)("section",{className:"stay-edit-info-container",children:[Object(P.jsxs)("div",{className:"stay-edit-long-info",children:[Object(P.jsxs)("div",{className:"stay-long-info-header",children:[Object(P.jsx)("div",{className:"stay-long-info-header-txt",children:Object(P.jsxs)("span",{children:["capacity:",Object(P.jsx)("input",{className:"capacity",type:"number",name:"capacity",autoComplete:"off",onChange:this.handleChange,value:t.capacity,required:!0}),"\u2022 stayType:",Object(P.jsxs)("select",{name:"stayType",onChange:this.handleChange,children:[Object(P.jsx)("option",{value:"entire place",children:"entire place"}),Object(P.jsx)("option",{value:"private room",children:"private room"})]}),"\u2022 propertyType:",Object(P.jsxs)("select",{name:"propertyType",onChange:this.handleChange,value:t.propertyType,children:[Object(P.jsx)("option",{value:"loft",children:"loft"}),Object(P.jsx)("option",{value:"room",children:"room"}),Object(P.jsx)("option",{value:"studio",children:"studio"}),Object(P.jsx)("option",{value:"villa",children:"villa"}),Object(P.jsx)("option",{value:"appartment",children:"appartment"})]})]})}),Object(P.jsx)("img",{src:t.host.imgUrl,alt:"avatar"})]}),Object(P.jsxs)("div",{className:"stay-feature-container",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-home"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:t.stayType}),Object(P.jsx)("h4",{children:"entire place"===t.stayType?"You'll have the place to yourself.":"You'll have a private room to yourself."})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-book-open"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"House rules"}),Object(P.jsx)("h4",{children:"This place isn\u2019t suitable for children under 12 and the host doesn\u2019t allow pets."})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-medal"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("h3",{children:[t.host.fullname," is a Superhost"]}),Object(P.jsx)("h4",{children:"Superhosts are experienced, highly rated hosts who are committed to providing great stays for guests."})]})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("i",{className:"fas fa-bookmark"}),Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Wifi"}),Object(P.jsx)("h4",{children:"Guests often search for this popular amenity"})]})]})]}),Object(P.jsxs)("span",{className:"description",children:[Object(P.jsx)("h2",{children:"description"}),Object(P.jsx)("textarea",{type:"text",name:"desc",autoComplete:"off",onChange:this.handleChange,value:t.desc,required:!0})]}),Object(P.jsxs)("div",{className:"amenities-list",children:[Object(P.jsx)("h2",{children:"Amenities"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("span",{children:[Object(P.jsx)("input",{type:"checkbox",id:"TV",name:"amenities",value:t.amenities.TV,checked:t.amenities.TV,onChange:this.handleChange}),Object(P.jsx)("label",{htmlFor:"TV",children:" TV"})]}),Object(P.jsxs)("span",{children:[Object(P.jsx)("input",{type:"checkbox",id:"Wifi",name:"amenities",value:t.amenities.Wifi,checked:t.amenities.Wifi,onChange:this.handleChange}),Object(P.jsx)("label",{htmlFor:"Wifi",children:"Wifi"})]}),Object(P.jsxs)("span",{children:[Object(P.jsx)("input",{type:"checkbox",id:"Air conditioning",name:"amenities",value:t.amenities["Air conditioning"],checked:t.amenities["Air conditioning"],onChange:this.handleChange}),Object(P.jsx)("label",{htmlFor:"Air conditioning",children:"AC "})]}),Object(P.jsxs)("span",{children:[Object(P.jsx)("input",{type:"checkbox",id:"Smoking allowed",name:"amenities",value:t.amenities["Smoking allowed"],checked:t.amenities["Smoking allowed"],onChange:this.handleChange}),Object(P.jsx)("label",{htmlFor:"Smoking_allowed",children:"Smoking allowed "})]}),Object(P.jsxs)("span",{children:[Object(P.jsx)("input",{type:"checkbox",id:"Pets allowed",name:"amenities",value:t.amenities["Pets allowed"],checked:t.amenities["Pets allowed"],onChange:this.handleChange}),Object(P.jsx)("label",{htmlFor:"Pets allowed",children:"Pets allowed "})]}),Object(P.jsxs)("span",{children:[Object(P.jsx)("input",{type:"checkbox",id:"Cooking basics",name:"amenities",value:t.amenities["Cooking basics"],checked:t.amenities["Cooking basics"],onChange:this.handleChange}),Object(P.jsx)("label",{htmlFor:"Cooking basics",children:"Cooking basics "})]})]})]})]}),Object(P.jsx)("div",{className:"order-form-container",children:Object(P.jsxs)("h3",{children:["price:"," ",Object(P.jsx)("input",{type:"number",name:"price",autoComplete:"off",onChange:this.handleChange,value:t.price})," ","/ night"]})})]}),Object(P.jsx)("button",{type:"submit",className:"stay-edit-save-btn",children:"Save"})]})}):""}}]),s}(a.Component);var mt={addStay:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.add(e);case 3:a=t.sent,s({type:"ADD_STAY",stay:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("StayActions: err in addStay",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateStay:dt},Ot=Object(B.b)((function(e){return{stays:e.stayModule.stays}}),mt)(bt);function xt(e){var t=e.order,s=e.updateOrder;function a(e){t.status=e,s(t)}return Object(P.jsxs)("div",{className:"host-stay-preview",children:[Object(P.jsx)("span",{children:Object(P.jsx)("img",{src:t.user.imgUrl,alt:"user"})}),Object(P.jsx)("span",{children:t.user.fullname}),Object(P.jsx)("span",{children:t.startDate}),Object(P.jsx)("span",{children:t.endDate}),Object(P.jsx)("span",{children:t.status}),Object(P.jsxs)("span",{children:["$ ",t.totalPrice.toLocaleString("en-US")]}),Object(P.jsxs)("span",{className:"stay-actions",children:["approved"===t.status&&Object(P.jsxs)("button",{onClick:function(){a("declined")},children:[Object(P.jsx)("i",{className:"fas fa-times"}),"Decline"]}),"declined"===t.status&&Object(P.jsxs)("button",{onClick:function(){a("approved")},children:[Object(P.jsx)("i",{className:"fas fa-check"}),"Re-Approve"]}),"wait for approval"===t.status&&Object(P.jsxs)("button",{onClick:function(){a("approved")},children:[Object(P.jsx)("i",{className:"fas fa-check"}),"Approve"]})]})]})}function ft(e){var t=e.orders,s=e.updateOrder,a=e.onSelectAction;return Object(P.jsx)("section",{className:"host-order-list",children:Object(P.jsxs)("div",{className:"host-order-list-table",children:[Object(P.jsx)("div",{className:"thead",children:Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:""}),Object(P.jsx)("span",{children:"Guest Name"}),Object(P.jsx)("span",{children:"Check in"}),Object(P.jsx)("span",{children:"Check out"}),Object(P.jsx)("span",{children:"Status"}),Object(P.jsx)("span",{children:"Price"}),Object(P.jsx)("span",{className:"stay-actions",children:"Actions"})]})}),Object(P.jsxs)("div",{className:"tbody",children:[!t.length&&Object(P.jsxs)("h1",{className:"empty-msg",children:["No Orders to show yet, you can edit your stay pages to make it more appealing on the ",Object(P.jsx)("button",{value:"my Stays",onClick:a,children:"My Stays"})," tab"]}),t.length>0&&t.map((function(e){return Object(P.jsx)(xt,{order:e,updateOrder:s},Math.random())}))]})]})})}function gt(e){var t=e.orders,s=e.updateOrder,a=e.onSelectAction;return Object(P.jsx)("section",{className:"host-order-container",children:Object(P.jsx)(ft,{orders:t,updateOrder:s,onSelectAction:a})})}var vt=s.p+"static/media/user-cash.e1f91298.PNG",yt=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={action:"",loggedInUser:null,selsctedEditStay:null,orderChangeStatus:0},e.getRateChangStatus=function(){return A.getRandomIntInclusive(0,5)},e.loadHostStays=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadHostStays(e.state.loggedInUser._id);case 2:0===e.props.stays.length&&e.setState({action:"add stay"});case 3:case"end":return t.stop()}}),t)}))),e.onSelectAction=function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s.target.value,e.setState({action:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSelectedEditStay=function(t){e.setState({selsctedEditStay:t},(function(){e.setState({action:"edit stay"})}))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setState({loggedInUser:Object(i.a)(Object(i.a)({},this.props.loggedInUser),{},{isHost:!0})},(function(){e.props.updateUser(e.state.loggedInUser),e.loadHostStays(),e.props.loadOrders({id:e.state.loggedInUser._id,type:"host"})})),this.props.setFooterDisplay(!1),this.props.setHomePage("dash"),this.setState({orderChangeStatus:A.getRandomIntInclusive(0,5)})}},{key:"componentWillUnmount",value:function(e,t){this.props.setFooterDisplay(!0)}},{key:"render",value:function(){var e=this.state,t=e.action,s=e.loggedInUser,a=e.selsctedEditStay,n=e.orderChangeStatus,c=this.props,r=c.removeStay,i=c.stays,o=c.toggleMsgModal,l=c.orders,d=c.updateOrder;return Object(P.jsx)("main",{className:"main page",children:Object(P.jsxs)("section",{className:"dashboard-container",children:[Object(P.jsxs)("section",{className:"dash-nav-sticky-container",children:[Object(P.jsx)(tt,{onSelectAction:this.onSelectAction}),Object(P.jsxs)("div",{className:"host-info-container",children:[Object(P.jsx)("img",{src:vt,alt:"cash"}),Object(P.jsx)("h2",{children:"Make all payments through Home & go"}),Object(P.jsx)("p",{children:"Always pay and communicate through Home & go to ensure you're protected under our Terms of Service, Payments Terms of Service, cancellation, and other safeguards."})]})]}),!i&&Object(P.jsx)(Ue,{}),i&&Object(P.jsxs)("section",{className:"dash-main-container",children:[Object(P.jsx)(st,{stays:i,orders:l,orderChangeStatus:n}),Object(P.jsxs)("section",{className:"dash-info-container",children:[(""===t||"my Stays"===t)&&Object(P.jsx)(ct,{stays:i,onSelectedEditStay:this.onSelectedEditStay,onSelectAction:this.onSelectAction}),"rate stat"===t&&Object(P.jsx)(lt,{stays:i}),"edit stay"===t&&Object(P.jsx)(Ot,{stayEdit:a,removeStay:r,onSelectAction:this.onSelectAction,loggedInUser:s,toggleMsgModal:o}),"add stay"===t&&Object(P.jsx)(Ot,{onSelectAction:this.onSelectAction,loggedInUser:s,toggleMsgModal:o}),"orders"===t&&Object(P.jsx)(gt,{loggedInUser:s,orders:l,updateOrder:d,onSelectAction:this.onSelectAction})]})]})]})})}}]),s}(a.Component),kt={loadHostStays:ut,removeStay:jt},Nt=Object(B.b)((function(e){return{stays:e.stayModule.stays}}),kt)(yt),wt=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){var e=this.props,t=e.order,s=e.getCancelationStatus,a=e.onCancelOrder;return Object(P.jsxs)(b.b,{to:"/stay/".concat(t.stay._id),className:"order-preview",children:[Object(P.jsxs)("div",{className:"img-container",children:[Object(P.jsx)("img",{src:t.stay.imgUrls[0],alt:"stay"}),Object(P.jsx)("img",{src:t.stay.imgUrls[1],alt:"stay"}),Object(P.jsx)("img",{src:t.stay.imgUrls[2],alt:"stay"})]}),Object(P.jsxs)("div",{className:"details-container",children:[Object(P.jsxs)("h3",{children:[t.stay.name,Object(P.jsxs)("p",{children:[Object(P.jsx)("span",{children:t.startDate}),Object(P.jsx)("span",{children:t.endDate})]})]}),Object(P.jsxs)("h4",{className:"order-price",children:["$ ",t.totalPrice.toLocaleString("en-US")]}),Object(P.jsx)("h4",{className:"order-status ".concat("approved"===t.status&&"status-green"," ").concat("declined"===t.status&&"status-red"),children:t.status}),Object(P.jsxs)("div",{className:"order-cancelation",children:[Object(P.jsx)("h4",{children:s(t)}),"Non-refundable"!==s(t)&&Object(P.jsx)("button",{onClick:function(){return a(t)},children:"Cancel order"}),"Non-refundable"===s(t)&&Object(P.jsx)("button",{className:"cancel-disabled",disabled:!0,onClick:function(){return a(t)},children:"Cancel order"})]})]})]})}}]),s}(a.Component);function St(e){var t=e.orders,s=e.getCancelationStatus,a=e.onCancelOrder;return t&&t.length?Object(P.jsx)("section",{className:"order-list",children:t.map((function(e){return Object(P.jsx)(wt,{order:e,getCancelationStatus:s,onCancelOrder:a},Math.random())}))}):Object(P.jsx)(Ue,{})}var Ct=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={sction:"",loggedInUser:null,orders:[],filterBy:{status:!0,price:!0,checkIn:!0,checkOut:!0,name:!0},currPage:"upcoming"},e.loadOrders=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadOrders({id:e.state.loggedInUser._id,type:"user"});case 2:e.setState({orders:e.props.orders}),e.showOrdersByTime();case 4:case"end":return t.stop()}}),t)}))),e.onCancelOrder=function(){var t=Object(d.a)(l.a.mark((function t(s){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.getTimeBeforeTrip(s.startDate)>=7)){t.next=8;break}return t.next=4,e.props.removeOrder(s._id);case 4:e.setState({orders:e.props.orders}),e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"far fa-check-circle"}),Object(P.jsx)("h3",{children:"Your order has been canceled"})]})),t.next=9;break;case 8:e.props.toggleMsgModal(Object(P.jsxs)("span",{children:[Object(P.jsx)("i",{className:"far fa-times-circle"}),Object(P.jsx)("h3",{children:"You can't cancel this order"})]}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleShowOrderTime=function(t){e.setState({currPage:t},(function(){e.showOrdersByTime()}))},e.showOrdersByTime=function(){var t=e.props.orders,s=[];"upcoming"===e.state.currPage?t.forEach((function(e){new Date(e.startDate)-new Date(Date.now())>0&&s.push(e)})):t.forEach((function(e){new Date(e.startDate)-new Date(Date.now())<0&&s.push(e)})),e.setState({orders:s})},e.getCancelationStatus=function(t){var s=e.getTimeBeforeTrip(t.startDate)-7;return s>0?"Refundable in the next ".concat(s.toFixed(0)," days"):"Non-refundable"},e.getTimeBeforeTrip=function(e){return(new Date(e).getTime()-Date.now())/1e3/60/60/24},e.handleChange=function(t){var s=t.target.name;e.setState({filterBy:Object(i.a)(Object(i.a)({},e.state.filterBy),{},Object(F.a)({},s,!e.state.filterBy[s]))},(function(){}))},e.onSortOrders=function(t){t.preventDefault();var s=e.state.orders,a=[];switch(t.target.name){case"name":a=Ut(s);break;case"checkIn":a=Tt(s,"startDate"),console.log(a);break;case"checkOut":a=Tt(s,"endDate");break;case"price":a=Mt(s)}e.setState({orders:a})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setState({loggedInUser:this.props.loggedInUser},(function(){e.loadOrders()})),this.props.setFooterDisplay(!1),this.props.setHomePage("orders")}},{key:"componentWillUnmount",value:function(){this.props.setFooterDisplay(!0)}},{key:"render",value:function(){var e=this,t=this.state,s=t.orders,a=t.filterBy,n=t.currPage,c=a.name,r=a.price,i=a.status,o=a.checkIn,l=a.checkOut;return console.log(s),s?Object(P.jsx)("main",{className:"user-order-container main page",children:Object(P.jsxs)("section",{className:"user-order-list",children:[Object(P.jsx)("h1",{children:"Trips"}),Object(P.jsxs)("div",{className:"order-header",children:[Object(P.jsxs)("div",{className:"order-nav",children:[Object(P.jsx)("button",{className:"upcoming"===n&&"active",onClick:function(){e.toggleShowOrderTime("upcoming")},children:" Upcoming"}),Object(P.jsx)("button",{className:"past"===n&&"active",onClick:function(){e.toggleShowOrderTime("past")},children:"Past"})]}),Object(P.jsxs)("div",{className:"order-filter",children:[Object(P.jsx)("button",{name:"name",value:c,onClick:this.onSortOrders,children:"Stay name"}),Object(P.jsx)("button",{name:"checkIn",value:o,onClick:this.onSortOrders,children:"Check in"}),Object(P.jsx)("button",{name:"checkOut",value:l,onClick:this.onSortOrders,children:"Check out"}),Object(P.jsx)("button",{name:"price",value:r,onClick:this.onSortOrders,children:"Price"}),Object(P.jsx)("button",{name:"status",value:i,children:"Status"})]})]}),Object(P.jsx)(St,{orders:s,getCancelationStatus:this.getCancelationStatus,onCancelOrder:this.onCancelOrder})]})}):Object(P.jsx)(Ue,{})}}]),s}(a.Component);function Ut(e){return e.sort((function(e,t){var s=e.stay.name.toUpperCase(),a=t.stay.name.toUpperCase();return s<a?-1:s>a?1:0}))}function Tt(e,t){return e.sort((function(e,s){return new Date(e[t])-new Date(s[t])}))}function Mt(e){return e.sort((function(e,t){return e.totalPrice-t.totalPrice}))}var Dt=s.p+"static/media/logo.b08875a0.png",It=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.setFooterDisplay(!1)}},{key:"componentWillUnmount",value:function(){this.props.setFooterDisplay(!0)}},{key:"render",value:function(){var e=this.props.loggedInUser;return Object(P.jsx)("main",{className:"main",children:Object(P.jsxs)("section",{className:"full bocome-host-container",children:[Object(P.jsxs)("div",{className:"hosting-img",children:[Object(P.jsx)(b.b,{className:"a",to:"/",children:Object(P.jsx)("i",{className:"fab fa-airbnb fa-3x logo-icon"})}),Object(P.jsx)("img",{className:"guests-img",src:"https://www.insidehook.com/wp-content/uploads/2021/03/good-airbnb-guest-2.jpg?fit=1200%2C800",alt:""})]}),Object(P.jsxs)("div",{className:"hosting-info",children:[Object(P.jsx)("h1",{children:"Hosting makes us"}),Object(P.jsxs)("h1",{className:"logo",children:["Home",Object(P.jsx)("img",{src:Dt,alt:"logo"}),"Go"]})]}),Object(P.jsx)("button",{className:"host-btn",children:Object(P.jsx)(b.b,{to:e?"/host/".concat(e._id):"/login",children:"Try hosting"})})]})})}}]),s}(a.Component),At=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onClearNotif=function(){var t=e.props.loggedInUser;t.notifications=[],e.props.updateUser(t)},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.setFooterDisplay(!1),this.props.setHomePage("user"),this.props.setNotifStatus(!1);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.setFooterDisplay(!0);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.loggedInUser.notifications;return Object(P.jsx)("main",{className:"notifications main page",children:Object(P.jsxs)("section",{className:"notif-list",children:[Object(P.jsx)("h1",{children:"Notifications"}),t&&t.map((function(t){return Object(P.jsxs)("div",{className:"notif-card",children:[Object(P.jsx)("img",{src:t.imgUrl,alt:"avatar"}),Object(P.jsxs)("span",{children:[Object(P.jsx)("h3",{children:t.fullname}),Object(P.jsx)("h4",{children:A.getTimeFormat(t.createdAt)})]}),Object(P.jsx)("h4",{className:"notif-card-txt",children:t.txt}),"from"===t.type&&Object(P.jsx)(b.b,{to:"/host/".concat(e.props.loggedInUser._id),children:"Read More"}),"to"===t.type&&Object(P.jsx)(b.b,{to:"/orders",children:"Read More"})]},Math.random())})),Object(P.jsx)("button",{onClick:this.onClearNotif,children:"Clear all"})]})})}}]),s}(a.Component);var _t=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"componentDidUpdate",value:function(e){e.modalType!==this.props.modalType&&""!==this.props.modalType&&this.props.openDynamicModal(this.props.modalType)}},{key:"render",value:function(){var e=this.props.modalPosition;return e&&e.top&&e.left?Object(P.jsxs)(n.a.Fragment,{children:[Object(P.jsx)("div",{className:"modal-bg"}),Object(P.jsx)("section",{className:"dynamic-modal",style:e,children:this.props.children})]}):""}}]),s}(a.Component),Pt=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return Object(P.jsx)("section",{className:"user-msg",children:this.props.children})}}]),s}(a.Component),Et=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(j.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={userMsg:"",isUserMsg:!1,modalType:"",dynamicModal:{modalContent:"",modalPosition:{top:0,left:0,height:0,width:0}},topRatedStays:[],nearbayStays:[],isFooterOn:!0,currPage:"home",isNewNotif:!1},e.onOrderIn=function(){var t=Object(d.a)(l.a.mark((function t(s){var a,n,c,r,i,o,d,j,u,h,p,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.props.loggedInUser)._id!==s.host._id){t.next=16;break}return t.next=4,se.getById(s.host._id);case 4:n=t.sent,c="".concat(s.user.fullname," booked your stay"),r=new Date,i=s.user.imgUrl,o=s.user.fullname,"from",d={txt:c,createdAt:r,imgUrl:i,fullname:o,type:"from"},e.setNotifStatus(!0),n.notifications||(n.notifications=[]),n.notifications.unshift(d),e.props.updateUser(n),t.next=17;break;case 16:a._id===s.user._id&&(j="Your order has been sent to ".concat(s.host.fullname),u=new Date,h=s.host.imgUrl,p=s.host.fullname,"to",b={txt:j,createdAt:u,imgUrl:h,fullname:p,type:"to"},e.setNotifStatus(!0),a.notifications||(a.notifications=[]),a.notifications.unshift(b),e.props.updateUser(a));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setNotifStatus=function(t){e.setState({isNewNotif:t})},e.loadRated=Object(d.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.getTopRatedStays();case 2:s=t.sent,e.setState({topRatedStays:s});case 4:case"end":return t.stop()}}),t)}))),e.loadNearby=Object(d.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.getNearbyStays("portugal");case 2:s=t.sent,e.setState({nearbayStays:s});case 4:case"end":return t.stop()}}),t)}))),e.onSearch=function(t){e.props.addTrip(t),e.props.loadStays(t)},e.toggleMsgModal=function(t){e.setState({userMsg:t,isUserMsg:!0}),setTimeout((function(){e.setState({isUserMsg:!1})}),4e3),setTimeout((function(){e.setState({userMsg:""})}),6e3)},e.setModalContent=function(t,s){e.setState({dynamicModal:t,modalType:s})},e.closeDynamicModal=function(t){"scroll"!==t.type?t.target.closest(".dynamic-modal")||"BUTTON"!==t.target.nodeName&&e.setState({modalType:""},(function(){window.removeEventListener("click",e.closeDynamicModal,!0),window.removeEventListener("scroll",e.closeDynamicModal,!0)})):e.setState({modalType:""},(function(){window.removeEventListener("click",e.closeDynamicModal,!0),window.removeEventListener("scroll",e.closeDynamicModal,!0)}))},e.openDynamicModal=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s&&"logout"===s.target.innerText?e.setState({modalType:""}):e.setState({modalType:t},(function(){window.addEventListener("click",e.closeDynamicModal,!0),window.addEventListener("scroll",e.closeDynamicModal,!0)}))},e.setFooterDisplay=function(t){e.setState({isFooterOn:t})},e.setHomePage=function(t){e.setState({currPage:t})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadRated(),this.loadNearby(),e.next=4,pe.setup();case 4:return e.next=6,pe.on("ORDER_IN",this.onOrderIn);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.off("ORDER_IN",this.onOrderIn);case 2:pe.terminate();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,s=t.stays,a=t.orders,n=t.updateUser,c=t.trip,r=t.addTrip,o=t.removeTrip,l=t.loggedInUser,d=t.logout,j=t.loadStays,u=t.loadOrders,h=t.removeOrder,p=t.loadWishlist,O=t.updateStay,x=t.login,f=t.updateOrder,g=this.state,v=g.userMsg,y=g.isUserMsg,k=g.modalType,N=g.dynamicModal,w=g.topRatedStays,S=g.nearbayStays,C=g.isFooterOn,U=g.currPage,T=g.isNewNotif;return Object(P.jsxs)(b.a,{children:[Object(P.jsx)(Ze,{trip:c,addTrip:r,removeTrip:o,modalType:k,onSearch:this.onSearch,loggedInUser:l,logout:d,openDynamicModal:this.openDynamicModal,closeDynamicModal:this.closeDynamicModal,setModalContent:this.setModalContent,currPage:U,loadStays:j,isNewNotif:T}),Object(P.jsxs)(m.c,{children:[Object(P.jsx)(m.a,{path:"/login",render:function(t){return Object(P.jsx)(Ye,Object(i.a)(Object(i.a)({},t),{},{setFooterDisplay:e.setFooterDisplay}))}}),Object(P.jsx)(m.a,{path:"/orders",render:function(t){return Object(P.jsx)(Ct,Object(i.a)(Object(i.a)({},t),{},{loadOrders:u,orders:a,loggedInUser:l,removeOrder:h,toggleMsgModal:e.toggleMsgModal,setFooterDisplay:e.setFooterDisplay,setHomePage:e.setHomePage}))}}),Object(P.jsx)(m.a,{path:"/host/:userId",render:function(t){return Object(P.jsx)(Nt,Object(i.a)(Object(i.a)({},t),{},{loggedInUser:l,updateUser:n,toggleMsgModal:e.toggleMsgModal,loadOrders:u,orders:a,setFooterDisplay:e.setFooterDisplay,setHomePage:e.setHomePage,updateOrder:f}))}}),Object(P.jsx)(m.a,{path:"/host",render:function(t){return Object(P.jsx)(It,Object(i.a)(Object(i.a)({},t),{},{loggedInUser:l,setFooterDisplay:e.setFooterDisplay}))}}),Object(P.jsx)(m.a,{path:"/wishlist",render:function(t){return Object(P.jsx)(We,Object(i.a)(Object(i.a)({},t),{},{stays:s,loadWishlist:p,loggedInUser:l,toggleMsgModal:e.toggleMsgModal,login:x,setHomePage:e.setHomePage,updateUser:n,trip:c,addTrip:r}))}}),Object(P.jsx)(m.a,{path:"/stay/:stayId",render:function(t){return Object(P.jsx)(Te,Object(i.a)(Object(i.a)({},t),{},{onSearch:e.onSearch,loggedInUser:l,toggleMsgModal:e.toggleMsgModal,login:x,openDynamicModal:e.openDynamicModal,modalType:k,updateStay:O,updateUser:n,setModalContent:e.setModalContent,setHomePage:e.setHomePage,setHostSocket:e.setHostSocket}))}}),Object(P.jsx)(m.a,{path:"/explore",render:function(t){return Object(P.jsx)(He,Object(i.a)(Object(i.a)({},t),{},{trip:c,loadStays:j,stays:s,updateUser:n,loggedInUser:l,openDynamicModal:e.openDynamicModal,closeDynamicModal:e.closeDynamicModal,setModalContent:e.setModalContent,setHomePage:e.setHomePage,toggleMsgModal:e.toggleMsgModal,login:x,addTrip:r}))}}),Object(P.jsx)(m.a,{path:"/user",render:function(t){return Object(P.jsx)(Ie,Object(i.a)(Object(i.a)({},t),{},{updateUser:n,setHomePage:e.setHomePage,setFooterDisplay:e.setFooterDisplay}))}}),Object(P.jsx)(m.a,{path:"/notif",render:function(t){return Object(P.jsx)(At,Object(i.a)(Object(i.a)({},t),{},{updateUser:n,loggedInUser:l,setHomePage:e.setHomePage,setFooterDisplay:e.setFooterDisplay,setNotifStatus:e.setNotifStatus}))}}),Object(P.jsx)(m.a,{path:"/",render:function(t){return Object(P.jsx)(ze,Object(i.a)(Object(i.a)({},t),{},{onSearch:e.onSearch,stays:s,loggedInUser:l,loadStays:j,topRatedStays:w,nearbayStays:S,setHomePage:e.setHomePage,addTrip:r}))}})]}),C&&Object(P.jsx)(et,{onSearch:this.onSearch,stays:s,topRatedStays:w,nearbayStays:S}),Object(P.jsx)(_t,{openDynamicModal:this.openDynamicModal,modalPosition:N.modalPosition,modalType:k,children:N.modalContent}),Object(P.jsx)(Pt,{children:Object(P.jsx)("section",{className:"user-msg ".concat(y&&"on"," "),children:v})})]})}}]),s}(a.Component),Rt={loadStays:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{guests:{adults:1,kids:0},loc:{address:""},time:{checkIn:"",checkOut:""}};return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.query(e);case 3:a=t.sent,s({type:"SET_STAYS",stays:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("StayActions: err in loadStays",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},addTrip:function(e){return function(t){t({type:"SET_TRIP",trip:V.add(e)})}},updateUser:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.update(e);case 3:a=t.sent,s({type:"UPDATE_USER",user:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in updateUser",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:le,loadTrip:function(){return function(e){e({type:"SET_TRIP",trip:V.query()})}},removeTrip:function(){return function(e){V.remove(),e({type:"REMOVE_TRIP"})}},logout:je,removeStay:jt,loadHostStays:ut,loadOrders:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z.query(e);case 3:a=t.sent,s({type:"SET_ORDERS",orders:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("OrderActions: err in loadOrders",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeOrder:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z.remove(e);case 3:s({type:"REMOVE_ORDER",orderId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("OrderActions: err in removeOrder",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadWishlist:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.getUserWishlist(e);case 3:a=t.sent,s({type:"SET_WISH_STAYS",stays:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("StayActions: err in loadWishlist",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateStay:dt,login:de,updateOrder:function(e){return function(){var t=Object(d.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z.update(e);case 3:a=t.sent,s({type:"UPDATE_ORDER",order:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("StayActions: err in update Stay",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Ft=Object(B.b)((function(e){return{stays:e.stayModule.stays,orders:e.orderModule.orders,trip:e.tripModule.trip,users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),Rt)(Et),Ht=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,395)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))},Lt=s(48),Wt=s(174),qt=s(15),Bt={stays:[]};var Yt=null;sessionStorage.loggedinUser&&(Yt=JSON.parse(sessionStorage.loggedinUser));var Gt={loggedInUser:Yt,users:[]};var Vt={orders:[]};var $t={guests:{adults:1,kids:0,baby:0},loc:{address:""},time:{checkIn:"",checkOut:""}};localStorage.trip&&($t=JSON.parse(localStorage.trip));var Jt={trip:$t};var zt={isLoading:!1};var Kt=Object(Lt.b)({systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1});default:return e}},orderModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_ORDERS":return Object(i.a)(Object(i.a)({},e),{},{orders:t.orders});case"ADD_ORDER":return Object(i.a)(Object(i.a)({},e),{},{orders:[].concat(Object(qt.a)(e.orders),[t.order])});case"REMOVE_ORDER":return Object(i.a)(Object(i.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});case"UPDATE_ORDER":return Object(i.a)(Object(i.a)({},e),{},{orders:e.orders.map((function(e){return e._id===t.order._id?t.order:e}))});default:return e}},stayModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_HOST_STAYS":case"SET_WISH_STAYS":case"SET_STAYS":return Object(i.a)(Object(i.a)({},e),{},{stays:t.stays});case"ADD_STAY":return Object(i.a)(Object(i.a)({},e),{},{stays:[].concat(Object(qt.a)(e.stays),[t.stay])});case"REMOVE_STAY":return Object(i.a)(Object(i.a)({},e),{},{stays:e.stays.filter((function(e){return e._id!==t.stayId}))});case"UPDATE_STAY":return Object(i.a)(Object(i.a)({},e),{},{stays:e.stays.map((function(e){return e._id===t.stay._id?t.stay:e}))});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(i.a)(Object(i.a)({},e),{},{loggedInUser:t.user});case"REMOVE_USER":return Object(i.a)(Object(i.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case"UPDATE_USER":return{loggedInUser:Object(i.a)(Object(i.a)({},t.user),{},{notifications:Object(qt.a)(t.user.notifications)}),users:e.users.map((function(e){return e._id===t.user._id?t.user:e}))};default:return e}},tripModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TRIP":return{trip:t.trip};case"ADD_TRIP":return Object(i.a)(Object(i.a)({},e),{},{stays:[].concat(Object(qt.a)(e.stays),[t.stay])});case"REMOVE_TRIP":return{trip:null};default:return e}}}),Xt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Lt.c,Zt=Object(Lt.d)(Kt,Xt(Object(Lt.a)(Wt.a)));s(388),s(389),s(390),s(391);r.a.render(Object(P.jsx)(n.a.StrictMode,{children:Object(P.jsx)(B.a,{store:Zt,children:Object(P.jsx)(Ft,{})})}),document.getElementById("root")),Ht()}},[[392,1,2]]]);
//# sourceMappingURL=main.1f973c20.chunk.js.map